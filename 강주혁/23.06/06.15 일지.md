# 23.06.15

### ì˜¤ëŠ˜ í•œ ì¼

- [x] ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´
- [x] vanilla-react ë¥¼ JS -> TSë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰

### í•˜ë£¨ ìš”ì•½

3~5ì‹œ / 6~10ì‹œ ê¹Œì§€ ì¹´í˜ì—ì„œ [ì„¸ë¦¼](https://github.com/anonymousRecords)ì´ë‘ ê³µë¶€í–ˆë‹¤.

ì•Œê³ ë¦¬ì¦˜ 2ë¬¸ì œ í’€ê³ , vanilla-reactë¥¼ TSë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰í–ˆë‹¤.

ì´ë²ˆì— í…Œì˜¤ ìŠ¤í”„ë¦°íŠ¸ 15ê¸°ê°€ ì˜¬ë¼ì™”ë‹¤! ì‘ë…„ì— 13ê¸° í–ˆì—ˆëŠ”ë°, ì´ë²ˆì— ë˜ ì‹ ì²­í–ˆë‹¤. ì¹œêµ¬ë“¤ë„ ê°™ì´ ì‹ ì²­í•´ì„œ ìŠ¤í”„ë¦°íŠ¸ ê°™ì´ í•˜ë©´ 

### ì£¼ì €ë¦¬ ì£¼ì €ë¦¬

ì¼ì •ì´ ê½‰ê½‰ ì°¼ë‹¤. ë§Œì•½ì— êµ¬ë¦„í†¤ê¹Œì§€ ë¶™ê²Œë˜ë©´ í•´ì»¤í†¤ì„ ì—°ì†ìœ¼ë¡œ ì„¸ë²ˆí•  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ë‹¤ ã…‹ã…‹

6/21 -> 6/26 : í…Œì˜¤ ìŠ¤í”„ë¦°íŠ¸ 15ê¸°
6/28 -> 6/30 : í•™êµ í•´ì»¤í†¤
7/7 -> 7/10 : êµ¬ë¦„í†¤?

ìŠ¤í”„ë¦°íŠ¸ ê¸°ê°„ë™ì•ˆ `GDG ì‚¬ëŒì„ ì°¾ìŠµë‹ˆë‹¤` ì»¨í¼ëŸ°ìŠ¤ ê°€ì„œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ ì§„í–‰í•  ìˆ˜ë„ ìˆë‹¤.. ë„ˆë¬´ ë§ë‚˜?ğŸ˜‚

---

## vanilla-reactë¥¼ JS -> TSë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰

> [ë ˆí¬](https://github.com/kangju2000/vanilla-react)

ì €ë²ˆ ìŠ¤í„°ë””ì—ì„œ í–ˆë˜ ê²ƒì„ ê°œì¸ ë ˆí¬ë¡œ ì˜®ê²¨ì„œ ì§„í–‰í–ˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§  ì½”ë“œë¥¼ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í–ˆë‹¤.

ìš°ì•„í•œí˜•ì œë“¤ ì´ì •ë¯¼ë‹˜ì˜ [vanilla_react](https://github.com/danmin20/vanilla_react) ë ˆí¬ë¥¼ ë³´ë‹ˆ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬í˜„ë˜ì–´ìˆë‹¤. ì´ ë ˆí¬ë¥¼ ë³´ê³  ì°¸ê³ í•´ì„œ ì§„í–‰í–ˆë‹¤.

ìŠ¤í„°ë”” ë•Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¨ì„œ êµ¬í˜„í• ê¹Œ ìƒê°í–ˆì—ˆëŠ”ë°, ì¢€ ì˜¤ë˜ê±¸ë¦´ ê²ƒ ê°™ì•„ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§„í–‰í–ˆì—ˆë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ ê¸°íšŒì— ë°”ê¿”ë³´ì•˜ë‹¤.

### ì„¸íŒ…

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í–ˆë‹¤.

```bash
$ yarn add -D typescript @babel/preset-typescript
```

ê·¸ë¦¬ê³  `.babelrc` íŒŒì¼ì„ ìˆ˜ì •í–ˆë‹¤.

`@babel/preset-typescript`ë¥¼ ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ” babelê³¼ typescriptë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œë‹¤.

```js
{
  "plugins": [
    [
      "@babel/plugin-transform-react-jsx",
      {
        "pragma": "Kreact.createElement",
        "pragmaFrag": "Kreact.fragment"
      }
    ]
  ],
  "presets": [
    "@babel/preset-typescript",
    [
      "@babel/preset-env",
      {
        "targets": {
          "browsers": [">= 1%"]
        }
      }
    ]
  ]
}
```

ê·¸ë¦¬ê³  ì›¹íŒ© ì„¤ì •ì„ í–ˆë‹¤. ê¸°ì¡´ `babel-loader`ì—ì„œ ì¶”ê°€ë¡œ ì„¤ì •ì„ í•´ì¤˜ì•¼í•œë‹¤.

```js
module: {
  rules: [
    {
      test: /\.(js|jsx|ts|tsx)$/i,
      use: 'babel-loader',
      exclude: /node_modules/,
    },
  ],
},
resolve: {
  extensions: [".js", ".ts", ".jsx", ".tsx", ".json"],
  alias: {
    '@': path.join(__dirname, 'src'),
  },
},
```

ì´ì°¸ì— alias ì„¤ì •ë„ í•´ì¤˜ì„œ importí•  ë•Œ ì§€ì €ë¶„í•˜ì§€ ì•Šê²Œ í–ˆë‹¤.

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

íŒŒì¼ë“¤ì„ tsx, tsë¡œ ë°”ê¾¸ê³  íƒ€ì… ì§€ì •ì„ í•´ì£¼ì—ˆë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ `useState`ë§Œ ë³´ìë©´

```ts
function useState<S>(
  initialState: S | (() => S)
): [S, (newState: S | ((prevState: S) => S)) => void] {
  let stateIndex = _stateIndex++;

  if (_states[stateIndex] === undefined) {
    if (initialState instanceof Function) initialState = initialState();
    _states[stateIndex] = initialState;
  }
  let state = _states[stateIndex];

  const setState = (newState: S) => {
    if (typeof newState === 'function') newState = newState(state);
    if (Object.is(_states[stateIndex], newState)) return;
    _states[stateIndex] = newState;
    _stateIndex = 0;
    _render();
  };

  return [state, setState];
}
```

ê·¸ë¦¬ê³  `Kreact` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.

```ts
// core/index.d.ts

declare namespace Kreact {
  interface KreactElement {
    type: any;
    props: {
      children: KreactElement[];
      key?: any;
      ref?: KreactRef;
      nodeValue?: any;
    };
  }

  interface KreactFragment {
    type: 'FRAGMENT';
    props: {
      children: KreactElement[];
      key?: any;
    };
  }

  type KreactNode = ReactElement | string | number | KreactFragment | boolean | null | undefined;

  //...
}
```

ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ `React.ReactNode`ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```ts
import Header from './Header';
import styles from './index.module.css';

interface LayoutProps {
  children?: Kreact.KreactNode;
}

export default function Layout({ children }: LayoutProps) {
  return (
    <div className={styles.layout}>
      <Header />
      <main className={styles.main}>{children}</main>
    </div>
  );
}
```

ì—¬ê¸°ì„œ ë¬¸ì œê°€ ì‚´ì§ ìˆê¸´ í•˜ë‹¤. ì§€ê¸ˆì€ `children?`ì„ í•´ì„œ ì„ íƒì ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆê²Œ í–ˆëŠ”ë°, ì´ê±¸ ë§Œì•½ `children`ìœ¼ë¡œ í–ˆì„ ë•Œ propìœ¼ë¡œ `children`ì„ ë„˜ê²¨ì£¼ë©´ ts ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

coreì—ì„œ ì²˜ë¦¬ë¥¼ í•´ë‘ì–´ì„œ ì‹¤ì œë¡œëŠ” ë¬¸ì œê°€ ì—†ì§€ë§Œ, tsì—ì„œëŠ” ë¬¸ì œê°€ ìˆë‹¤ê³  íŒë‹¨í•œë‹¤.

íƒœê·¸ë¡œ ê°ì‹¼ê±¸ childrenìœ¼ë¡œ ì¸ì‹ì‹œí‚¬ ë°©ë²•ì„ ì°¾ì•„ë´ì•¼ê² ë‹¤.

### `import Kreact from 'kreact'` ì§€ìš°ê¸°

ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì¨ë³´ë©´ ìš”ì¦˜ì€ `import React from 'react'` ì„ ì–¸ ì•ˆí•´ë„ ëœë‹¤. ì˜›ë‚ ì˜›ì  React 17 ì „ì—ëŠ” `import React from 'react'` ì„ ì–¸ì„ í•´ì¤˜ì•¼ í–ˆì§€ë§Œ ì§€ê¸ˆì€ ì•ˆì¨ë„ ëœë‹¤.

ë‚´ë¶€ì ìœ¼ë¡œ [JSX transformer](https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html)ê°€ ìë™ìœ¼ë¡œ importí•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

ë‚˜ë„ Auto-import í•˜ê³ ì‹¶ë‹¤!!! ì›¹íŒ© í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ì•„ë³´ë‹ˆ ì´ëŸ°ê²Œ ìˆì—ˆë‹¤.

- [ProvidePlugin](https://webpack.kr/plugins/provide-plugin/)

```js
// webpack.config.js
const webpack = require('webpack');

module.exports = {
  plugins: [
    new webpack.ProvidePlugin({
      Kreact: '@/core/Kreact',
    }),
  ],

  //...
};
```

ì´ë ‡ê²Œ í•˜ë©´ ë¹Œë“œë  ë•Œ ìë™ìœ¼ë¡œ Kreactë¥¼ import í•´ì„œ `import Kreact from 'kreact'`ë¥¼ ì•ˆí•´ì¤˜ë„ ëœë‹¤!

---

### ë‚´ì¼ í•  ì¼

- ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´
- í¬ë¡¬ìµìŠ¤í…ì…˜ ë¦¬íŒ©í† ë§ ë° ê¸°ëŠ¥ ê°œë°œ
- TIL ë§ˆì´ê·¸ë ˆì´ì…˜ í”„ë¡œì íŠ¸ ì‹œì‘..?
- ì˜¤í›„ 9ì‹œ CS ìŠ¤í„°ë”” íšŒì˜
