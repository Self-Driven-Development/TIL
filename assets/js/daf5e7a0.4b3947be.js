"use strict";(self.webpackChunkdogsounds_til=self.webpackChunkdogsounds_til||[]).push([[7906],{68339:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>C});var a=t(39953);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(t),c=r,C=m["".concat(l,".").concat(c)]||m[c]||u[c]||i;return t?a.createElement(C,o(o({ref:n},p),{},{components:t})):a.createElement(C,o({ref:n},p))}));function C(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=c;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},55029:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=t(855),r=(t(39953),t(68339));const i={},o="07.24",s={unversionedId:"\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24",id:"\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24",title:"07.24",description:"1. Component Composition",source:"@site/members/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24.md",sourceDirName:"\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d",slug:"/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24",permalink:"/TIL/members/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24",draft:!1,editUrl:"https://github.com/Self-Driven-Development/TIL/tree/main/members/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.24.md",tags:[],version:"current",frontMatter:{},sidebar:"all",previous:{title:"23.07.23()",permalink:"/TIL/members/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.23"},next:{title:"23.07.25(\uc218)",permalink:"/TIL/members/\ubc15\uaddc\uc131/Memo/\ucf54\ub4dc \ubd84\uc11d/07.26"}},l={},d=[{value:"1. Component Composition",id:"1-component-composition",level:2},{value:"\uc0ac\uc6a9\ubc95",id:"\uc0ac\uc6a9\ubc95",level:3},{value:"2. useTimer",id:"2-usetimer",level:2},{value:"3. step \uad6c\uc870",id:"3-step-\uad6c\uc870",level:2},{value:"Step\uc744 \uc774\uc6a9\ud55c \ud398\uc774\uc9c0 \uad6c\ubd84",id:"step\uc744-\uc774\uc6a9\ud55c-\ud398\uc774\uc9c0-\uad6c\ubd84",level:3},{value:"Step \ub2e8\uacc4",id:"step-\ub2e8\uacc4",level:3}],p={toc:d},m="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(m,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"0724"},"07.24"),(0,r.kt)("h2",{id:"1-component-composition"},"1. ",(0,r.kt)("a",{parentName:"h2",href:"https://velog.io/@jangws/React-Context%EA%B0%80-%EA%BC%AD-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%ED%95%A9%EC%84%B1%EC%9C%BC%EB%A1%9C-props-drilling%EC%9D%84-%EA%B7%B9%EB%B3%B5%ED%95%B4%EB%B3%B4%EC%9E%90"},"Component Composition")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react';\n\n// ParentBox\ub77c\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc774 \ucef4\ud3ec\ub10c\ud2b8\ub294 \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\ub4e4(children)\uc744 prop\uc73c\ub85c \ubc1b\uc2b5\ub2c8\ub2e4.\nconst ParentBox = ({ children }) => {\n\n  // React.Children.toArray \ud568\uc218\ub97c \uc774\uc6a9\ud574 \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ubc30\uc5f4\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\n  const flattenChildren = React.Children.toArray(children);\n\n  // \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\uc758 onChange \uc774\ubca4\ud2b8 \ubc1c\uc0dd \uc2dc \uc2e4\ud589\ub420 \ubd80\ubaa8 \ud568\uc218\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.\n  // \uc774 \ud568\uc218\ub294 \uc774\ubca4\ud2b8 \uac1d\uccb4\ub97c \ucf58\uc194\uc5d0 \ub85c\uae45\ud569\ub2c8\ub2e4.\n  const parentFunc = (e) => {\n    console.log(e, '\uc5ec\uae30\uc5d0\uc11c\ub294 \uc790\uc2dd \uc778\ud48b onChange \uc774\ubca4\ud2b8\uc5d0 \ucd94\uac00\ud560 \ud568\uc218\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub2e4');\n  };\n\n  // \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\uc758 onChange \ucf5c\ubc31 \ud568\uc218\uc640 \ubd80\ubaa8 \ud568\uc218\ub97c \ud569\uc131\ud558\ub294 \ud568\uc218\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.\n  // \uc774 \ud568\uc218\ub294 onChange \uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud560 \ub54c\ub9c8\ub2e4 \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\uc758 onChange \ucf5c\ubc31 \ud568\uc218\ub97c \uba3c\uc800 \ud638\ucd9c\ud55c \ub4a4, \ubd80\ubaa8 \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4.\n  const compositeOnChange = (callback) => (e) => {\n    callback(e);\n    parentFunc(e);\n  };\n\n  // \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \uc21c\ud68c\ud558\uba74\uc11c, \uac01 \ucef4\ud3ec\ub10c\ud2b8\uac00 input\uc778 \uacbd\uc6b0\uc5d0\ub9cc onChange \ucf5c\ubc31 \ud568\uc218\ub97c \ud569\uc131 \ud568\uc218\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\n  // \ub9cc\uc57d \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\uac00 input\uc774 \uc544\ub2cc \uacbd\uc6b0\uc5d0\ub294 \uc6d0\ub798\uc758 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.\n  const changedChildren = flattenChildren.map((child) => {\n    if (child.type?.target === 'input') {\n      return {\n        ...child,\n        props: {\n          ...child.props,\n          onChange: compositeOnChange(child.props.onChange),\n        },\n      };\n    }\n    return child;\n  });\n\n  // \ubcc0\uacbd\ub41c \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8\ub4e4\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\n  return <>{changedChildren}</>;\n};\n\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"React.Children.toArray(children)")," : children\uc744 \ud3c9\ud3c9\ud558\uac8c \ub9cc\ub4e4\uc5b4 1\ucc28\uc6d0 \ubc30\uc5f4\ub85c \ubcc0\ud658\ud558\uc5ec return\ud55c\ub2e4.")),(0,r.kt)("h3",{id:"\uc0ac\uc6a9\ubc95"},"\uc0ac\uc6a9\ubc95"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"<ParentBox>\n  <input onChange={onChangeInput} />\n  <input onChange={onChangeInput} />\n  <input onChange={onChangeInput} />\n</ParentBox>;\n")),(0,r.kt)("h2",{id:"2-usetimer"},"2. ",(0,r.kt)("a",{parentName:"h2",href:"https://github.com/thibaultboursier/use-timer"},"useTimer")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// useTimer.ts\nimport reducer from './reducer';\nimport { useCallback, useEffect, useReducer } from 'react';\nimport type { ReturnType, UseTimerProps } from './type';\n\n// \ud0c0\uc774\uba38 \ud6c5\uc744 \uc120\uc5b8\ud569\ub2c8\ub2e4. \ud574\ub2f9 \ud6c5\uc740 UseTimerProps \ud0c0\uc785\uc758 \uc18d\uc131\ub4e4\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.\n// \ubc18\ud658 \ud0c0\uc785\uc740 ReturnType\uc785\ub2c8\ub2e4.\nconst useTimer = ({\n  autostart = false,\n  endTime,\n  initialStatus = 'STOPPED',\n  initialTime = 0,\n  interval = 1000,\n  onTimeOver,\n  onTimeUpdate,\n  step = 1,\n  timerType = 'DECREMENTAL',\n}: Partial<UseTimerProps> = {}): ReturnType => {\n  // useReducer \ud6c5\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c1\ud0dc \uad00\ub9ac\ub97c \ud569\ub2c8\ub2e4. \ucd08\uae30 \uc0c1\ud0dc\ub294 status, time, timerType\uc73c\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4.\n  const [state, dispatch] = useReducer(reducer, {\n    status: initialStatus,\n    time: initialTime,\n    timerType,\n  });\n\n  const { status, time } = state;\n\n  // \uc2dc\uac04\uc744 \uc9c4\ud589\uc2dc\ud0a4\ub294 \ud568\uc218\ub97c \uc120\uc5b8\ud569\ub2c8\ub2e4.\n  const advanceTime = useCallback((timeToAdd: number) => {\n    dispatch({ type: 'advanceTime', payload: { timeToAdd } });\n  }, []);\n\n  // \ud0c0\uc774\uba38\ub97c \uc77c\uc2dc \uc815\uc9c0\uc2dc\ud0a4\ub294 \ud568\uc218\ub97c \uc120\uc5b8\ud569\ub2c8\ub2e4.\n  const pause = useCallback(() => {\n    dispatch({ type: 'pause' });\n  }, []);\n\n  // \ud0c0\uc774\uba38\ub97c \ucd08\uae30\ud654\ud558\ub294 \ud568\uc218\ub97c \uc120\uc5b8\ud569\ub2c8\ub2e4.\n  const reset = useCallback(() => {\n    dispatch({ type: 'reset', payload: { initialTime } });\n  }, [initialTime]);\n\n  // \ud0c0\uc774\uba38\ub97c \uc2dc\uc791\ud558\ub294 \ud568\uc218\ub97c \uc120\uc5b8\ud569\ub2c8\ub2e4.\n  const start = useCallback(() => {\n    dispatch({ type: 'start', payload: { initialTime } });\n  }, [initialTime]);\n\n  // \ucef4\ud3ec\ub10c\ud2b8\uac00 \ub9c8\uc6b4\ud2b8 \ub418\uc5c8\uc744 \ub54c, autostart\uac00 true\ub77c\uba74 \ud0c0\uc774\uba38\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4.\n  useEffect(() => {\n    if (autostart) {\n      dispatch({ type: 'start', payload: { initialTime } });\n    }\n  }, [autostart, initialTime]);\n\n  // time \uac12\uc774 \ubcc0\ud560 \ub54c\ub9c8\ub2e4, onTimeUpdate \ucf5c\ubc31 \ud568\uc218\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4.\n  useEffect(() => {\n    if (typeof onTimeUpdate === 'function') {\n      onTimeUpdate(time);\n    }\n  }, [time, onTimeUpdate]);\n\n  // status\ub098 time \uac12\uc774 \ubcc0\ud560 \ub54c\ub9c8\ub2e4, endTime\uc5d0 \ub3c4\ub2ec\ud558\uba74 \ud0c0\uc774\uba38\ub97c \uba48\ucd94\uace0 onTimeOver \ucf5c\ubc31\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\n  useEffect(() => {\n    if (status !== 'STOPPED' && time === endTime) {\n      dispatch({ type: 'stop' });\n\n      if (typeof onTimeOver === 'function') {\n        onTimeOver();\n      }\n    }\n  }, [endTime, onTimeOver, time, status]);\n\n  // status\ub098 time \uac12\uc774 \ubcc0\ud560 \ub54c\ub9c8\ub2e4, status\uac00 'RUNNING'\uc77c \uacbd\uc6b0\uc5d0\ub294 interval\uc5d0 \ub530\ub77c \uc2dc\uac04\uc744 \uc9c4\ud589\ud558\uac70\ub098 \uc904\uc785\ub2c8\ub2e4.\n  // status\uac00 'RUNNING'\uc774 \uc544\ub2d0 \uacbd\uc6b0\uc5d0\ub294 interval\uc744 \uba48\ucda5\ub2c8\ub2e4.\n  useEffect(() => {\n    let intervalId: NodeJS.Timeout | null = null;\n\n    if (status === 'RUNNING') {\n      intervalId = setInterval(() => {\n        dispatch({\n          type: 'set',\n          payload: {\n            newTime: timerType === 'DECREMENTAL' ? time - step : time + step,\n          },\n        });\n      }, interval);\n    } else if (intervalId) {\n      clearInterval(intervalId);\n    }\n\n    // \ucef4\ud3ec\ub10c\ud2b8\uac00 \uc5b8\ub9c8\uc6b4\ud2b8 \ub418\uac70\ub098, useEffect\uac00 \uc885\ub8cc\ub418\ub294 \uacbd\uc6b0 interval\uc744 \uba48\ucda5\ub2c8\ub2e4.\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [status, step, timerType, interval, time]);\n\n  // \ud6c5\uc774 \ubc18\ud658\ud558\ub294 \uac12\uc785\ub2c8\ub2e4. \uc0c1\ud0dc \uac12\uacfc \uc561\uc158\uc744 \uc2e4\ud589\ud558\ub294 \ud568\uc218\ub4e4\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\n  return { advanceTime, pause, reset, start, status, time };\n};\n\nexport default useTimer;\n\n\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub108\ubb34 \ucf54\ub4dc\uac00 \ub9ce\uc73c\ub2c8 \ud558\ub098\ub9cc \uc0b4\ud3b4\ubcf4\uc790.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// useTimer.ts\nconst start = useCallback(() => {\n  dispatch({ type: 'start', payload: { initialTime } });\n}, [initialTime]);\n\n// actions.ts\nconst START = (initialTime: number) => createActionType('start', { initialTime });\n\n// reducer.ts\nswitch (action.type) {\n  case 'start': {\n    const { initialTime } = action.payload;\n\n    return {\n      ...state,\n      status: 'RUNNING',\n      time: state.status === 'STOPPED' ? initialTime : state.time,\n    };\n  }\n}\n\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"dispatch"),"\ub97c \ud1b5\ud574 ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"\uc744 ",(0,r.kt)("inlineCode",{parentName:"li"},"reducer"),"\uc5d0\uac8c \uc804\ub2ec\ud55c\ub2e4. \uc5b4\ub5a4 action\uc774\ub0d0\uba74 type\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"start"),"\uc774\uace0, payload\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"{ initialTime }"),"\uc774\ub2e4. \uc774 ",(0,r.kt)("inlineCode",{parentName:"li"},"initialTime"),"\uc740 props\ub85c \ubc1b\uc740 \uac12\uc774\ub2e4."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"action"),"\uc5d0\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"type"),"\uacfc ",(0,r.kt)("inlineCode",{parentName:"li"},"payload"),"\uac00 \uc788\ub2e4. ",(0,r.kt)("inlineCode",{parentName:"li"},"type"),"\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"start"),"\uc774\uace0, ",(0,r.kt)("inlineCode",{parentName:"li"},"payload"),"\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"{ initialTime }"),"\uc774\ub2e4. "),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"action"),"\uc774 ",(0,r.kt)("inlineCode",{parentName:"li"},"reducer"),"\uc5d0\uac8c \uc804\ub2ec\ub418\uc5c8\ub2e4. ",(0,r.kt)("inlineCode",{parentName:"li"},"reducer"),"\ub294 action.type\uc774 ",(0,r.kt)("inlineCode",{parentName:"li"},"start"),"\uc77c \uacbd\uc6b0, ",(0,r.kt)("inlineCode",{parentName:"li"},"initialTime"),"\uc744 ",(0,r.kt)("inlineCode",{parentName:"li"},"payload"),"\ub85c \ubc1b\uc544\uc11c ",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\uc758 ",(0,r.kt)("inlineCode",{parentName:"li"},"time"),"\uc5d0 \ud560\ub2f9\ud55c\ub2e4. \uadf8\ub9ac\uace0 ",(0,r.kt)("inlineCode",{parentName:"li"},"status"),"\ub97c ",(0,r.kt)("inlineCode",{parentName:"li"},"RUNNING"),"\uc73c\ub85c \ubcc0\uacbd\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\uac00 \ubcc0\uacbd\uc774 \ub418\uc5c8\uace0, \uc774\uc81c \ubcc0\uacbd\ub41c ",(0,r.kt)("inlineCode",{parentName:"li"},"state"),"\ub294 \ud654\uba74\uc5d0 \ubcf4\uc5ec\uc9c4\ub2e4.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc704 \uacfc\uc815\uc774 \ubc14\ub85c ",(0,r.kt)("inlineCode",{parentName:"li"},"flux"),"\ud328\ud134\uc774\ub2e4.")),(0,r.kt)("h2",{id:"3-step-\uad6c\uc870"},"3. ",(0,r.kt)("a",{parentName:"h2",href:"https://github.dev/depromeet/Ding-dong-fe"},"step \uad6c\uc870")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// page.tsx\nimport { IdCardCreationSteps } from '~/modules/IdCardCreation';\n\ntype IdCardCreationPageProps = {\n  params: {\n    communityId: string;\n  };\n};\n\nconst IdCardCreationPage = ({ params: { communityId } }: IdCardCreationPageProps) => {\n  return (\n    <>\n      <main>\n      <IdCardCreationSteps communityId={Number(communityId)} />\n      </main>\n      <div className=\"h-[50px] bg-white\" />\n    </>\n  );\n};\n\nexport default IdCardCreationPage;\n\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc11c\ubc84 \ucef4\ud3ec\ub10c\ud2b8\ub85c, uri\uc758 params\ub97c \ubc1b\uc544\uc640 \uba54\uc778 \ucef4\ud3ec\ub10c\ud2b8\uc778 ",(0,r.kt)("inlineCode",{parentName:"li"},"IdCardCreationSteps"),"\uc5d0 \ub118\uaca8\uc900\ub2e4.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// IdCardCreationSteps.tsx\n\nconst INIT_STEP = 0;\n\nconst steps: CreationSteps[] = ['BOARDING', 'PROFILE', 'KEYWORD', 'KEYWORD_CONTENT', 'COMPLETE'];\n\nconst CHARACTER_DEFAULT_KEYWORD = {\n  BUDDY: '\uc544\uc774\ub514\uc5b4 \ubc45\ud06c',\n  TOBBY: '\uc790\uc720\ub85c\uc6b4 \uc601\ud63c',\n  PIPI: '\ubaa8\ub450\uc758 \ubba4\uc988',\n  TRUE: '\ud604\uc2e4\uc8fc\uc758\uc790',\n};\n\nexport const idCardCreationSchema = yup.object({\n  profileImageUrl: yup.string(),\n  communityId: yup.number(),\n  nickname: yup.string().required('\uc774\ub984\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694.'),\n  aboutMe: yup.string(),\n  keywords: yup.array().min(1).default([]).required(),\n});\n\ntype IdCardCreationStepsProps = {\n  communityId: number;\n};\n\nexport const IdCardCreationSteps = ({ communityId }: IdCardCreationStepsProps) => {\n  const { errorToast } = useToastMessageStore();\n  const { data } = useGetUserInfo();\n  const profileImageUrl = data?.userProfileDto.profileImageUrl;\n  const characterType = data?.userProfileDto.characterType || 'BUDDY';\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const defaultKeywordByCharacter = {\n    title: CHARACTER_DEFAULT_KEYWORD[characterType],\n    imageUrl: '',\n    content: '',\n  };\n\n  const methods = useForm<IdCardCreationFormModel>({\n    defaultValues: {\n      communityId,\n      profileImageUrl,\n      nickname: '',\n      aboutMe: '',\n      keywords: [defaultKeywordByCharacter],\n    },\n    mode: 'onChange',\n    resolver: yupResolver(idCardCreationSchema),\n  });\n  const [idCardId, setIdCardId] = useState<number>();\n\n  const [stepOrder, setStepOrder] = useState<number>(INIT_STEP);\n  const onNext = () => setStepOrder(stepOrder + 1);\n  const onPrev = () => setStepOrder(stepOrder - 1);\n\n  const { mutateAsync } = usePostIdCardCreate({\n    onSuccess: data => {\n      setIdCardId(data.id);\n    },\n    onError: error => {\n      errorToast(error.message);\n      setTimeout(() => {\n        const planetIdPathname = pathname.replace('/id-card/create', '');\n        router.push(`${planetIdPathname}`);\n      }, 2000);\n    },\n  });\n\n  //TODO: Extract logic of sending complete step to router\n  const { data: checkIdCard } = useCheckIdCards(communityId);\n  const { data: idCardDetails } = useGetCommunityMyIdCardDetail(communityId, {\n    enabled: !!checkIdCard?.userMakeIdCard,\n  });\n\n  useLayoutEffect(() => {\n    if (!checkIdCard?.userMakeIdCard || !idCardDetails || stepOrder === steps.length - 1) {\n      return;\n    }\n    const { idCardId, profileImageUrl, nickname, aboutMe, keywords } =\n      idCardDetails.idCardDetailsDto;\n    const transformedKeywords = keywords.map(keyword => {\n      return { title: keyword.title, imageUrl: keyword.imageUrl, content: keyword.content };\n    });\n\n    setIdCardId(idCardId);\n    methods.setValue('profileImageUrl', profileImageUrl);\n    methods.setValue('nickname', nickname);\n    methods.setValue('aboutMe', aboutMe);\n    methods.setValue('keywords', transformedKeywords);\n    setStepOrder(steps.length - 1);\n  }, [checkIdCard, checkIdCard?.userMakeIdCard, idCardDetails, methods, stepOrder]);\n\n  const onSubmit = () => {\n    methods.handleSubmit(async data => {\n      await mutateAsync(data);\n    })();\n    onNext();\n  };\n\n  return (\n    <FormProvider {...methods}>\n      {/* planetName \uc8fc\uc785\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. */}\n      <div>\n        {steps[stepOrder] === 'BOARDING' && <BoardingStep onNext={onNext} />}\n        {['PROFILE', 'KEYWORD', 'KEYWORD_CONTENT'].includes(steps[stepOrder]) && (\n          <IdCardCreationForm\n            steps={steps}\n            stepOrder={stepOrder}\n            onNext={onNext}\n            onPrev={onPrev}\n            onSubmit={onSubmit}\n          />\n        )}\n        {steps[stepOrder] === 'COMPLETE' && idCardId && <CompleteStep idCardId={idCardId} />}\n      </div>\n    </FormProvider>\n  );\n};\n\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"const { errorToast } = useToastMessageStore();"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"toastMessage"),"\uc758 \uacbd\uc6b0 \uc804\uc5ed \uc0c1\ud0dc\ub85c \uad00\ub9ac\ud558\uace0 \uc788\ub2e4.")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"const { data } = useGetUserInfo();"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useQuery"),"\ub85c data\ub97c \ubc1b\uc544\uc628\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774 \ub370\uc774\ud130\ub97c \ud604\uc7ac client\uc5d0\uc11c \ubc1b\uc544\uc624\ub294\ub370, server\uc5d0\uc11c \ubbf8\ub9ac \ubc1b\uc544\uc11c \ub80c\ub354\ub9c1\ud558\ub294 \uac83\uc774 \ub354 \ub098\uc740 \ubc29\uc2dd\uc774\ub77c \uc0dd\uac01\ud55c\ub2e4."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"const profileImageUrl = data?.userProfileDto.profileImageUrl"),(0,r.kt)("inlineCode",{parentName:"li"},"const characterType = data?.userProfileDto.characterType || 'BUDDY';"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc704\uc758 ",(0,r.kt)("inlineCode",{parentName:"li"},"useQuery"),"\ub97c \ud1b5\ud574 \ubc1b\uc544\uc628 ",(0,r.kt)("inlineCode",{parentName:"li"},"data"),"\ub97c \ud1b5\ud574 ",(0,r.kt)("inlineCode",{parentName:"li"},"profileImageUrl"),"\uacfc ",(0,r.kt)("inlineCode",{parentName:"li"},"characterType"),"\uc744 \ubc1b\uc544\uc628\ub2e4. "))),(0,r.kt)("li",{parentName:"ol"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"  const { mutateAsync } = usePostIdCardCreate({\n    onSuccess: data => {\n      setIdCardId(data.id);\n    },\n    onError: error => {\n      errorToast(error.message);\n      setTimeout(() => {\n        const planetIdPathname = pathname.replace('/id-card/create', '');\n        router.push(`${planetIdPathname}`);\n      }, 2000);\n    },\n  });\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useMutation"),"\uc744 \ud1b5\ud574 ",(0,r.kt)("inlineCode",{parentName:"li"},"mutateAsync"),"\ub97c \uac00\uc838\uc628\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774 \ub54c, ",(0,r.kt)("inlineCode",{parentName:"li"},"useMutation"),"\uc758 \uc778\uc790\ub85c ",(0,r.kt)("inlineCode",{parentName:"li"},"onSuccess"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"onError")," callback \ud568\uc218\ub97c \ub118\uaca8\uc8fc\uc5b4 ",(0,r.kt)("inlineCode",{parentName:"li"},"mutateAsync"),"\uac00 \uc131\uacf5\ud588\uc744 \ub54c, \uc2e4\ud328\ud588\uc744 \ub54c\uc758 \ub85c\uc9c1\uc744 \uc791\uc131\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mutate"),"\ub294 \uc544\ubb34 \uac83\ub3c4 \ubc18\ud658\ud558\uc9c0 \uc54a\ub294 \ubc18\uba74, ",(0,r.kt)("inlineCode",{parentName:"li"},"mutateAsync"),"\ub294 \ubcc0\ud615 \uacb0\uacfc\uac00 \ud3ec\ud568\ub41c Promise\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.")),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"   useLayoutEffect(() => {\n    if (!checkIdCard?.userMakeIdCard || !idCardDetails || stepOrder === steps.length - 1) {\n      return;\n    }\n    const { idCardId, profileImageUrl, nickname, aboutMe, keywords } =\n      idCardDetails.idCardDetailsDto;\n    const transformedKeywords = keywords.map(keyword => {\n      return { title: keyword.title, imageUrl: keyword.imageUrl, content: keyword.content };\n    });\n\n    setIdCardId(idCardId);\n    methods.setValue('profileImageUrl', profileImageUrl);\n    methods.setValue('nickname', nickname);\n    methods.setValue('aboutMe', aboutMe);\n    methods.setValue('keywords', transformedKeywords);\n    setStepOrder(steps.length - 1);\n  }, [checkIdCard, checkIdCard?.userMakeIdCard, idCardDetails, methods, stepOrder]);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useLayoutEffect"),"\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect"),"\uc640 \ube44\uc2b7\ud558\uc9c0\ub9cc, ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect"),"\ub294 \ub80c\ub354\ub9c1\uc774 \ub05d\ub09c \ud6c4\uc5d0 \uc2e4\ud589\ub418\ub294 \ubc18\uba74, ",(0,r.kt)("inlineCode",{parentName:"li"},"useLayoutEffect"),"\ub294 \ub80c\ub354\ub9c1\uc774 \ub05d\ub098\uae30 \uc804\uc5d0 \uc2e4\ud589\ub41c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"ID \uce74\ub4dc \uccb4\ud06c\uc640 \uc138\ubd80 \uc815\ubcf4\uac00 \ubc14\ub014 \ub54c\ub9c8\ub2e4 \ud3fc \uac12\uc744 \uc124\uc815\ud558\uace0 \ub2e8\uacc4\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4.")),(0,r.kt)("h3",{id:"step\uc744-\uc774\uc6a9\ud55c-\ud398\uc774\uc9c0-\uad6c\ubd84"},"Step\uc744 \uc774\uc6a9\ud55c \ud398\uc774\uc9c0 \uad6c\ubd84"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const steps: CreationSteps[] = ['BOARDING', 'PROFILE', 'KEYWORD', 'KEYWORD_CONTENT', 'COMPLETE'];\nconst INIT_STEP = 0;\n// ...\nconst [stepOrder, setStepOrder] = useState<number>(INIT_STEP);\nconst onNext = () => setStepOrder(stepOrder + 1);\nconst onPrev = () => setStepOrder(stepOrder - 1);\n\nconst onSubmit = () => {\n  methods.handleSubmit(async data => {\n    await mutateAsync(data);\n  })();\n  onNext();\n};\n<div>\n  {steps[stepOrder] === 'BOARDING' && <BoardingStep onNext={onNext} />}\n  {['PROFILE', 'KEYWORD', 'KEYWORD_CONTENT'].includes(steps[stepOrder]) && (\n    <IdCardCreationForm\n      steps={steps}\n      stepOrder={stepOrder}\n      onNext={onNext}\n      onPrev={onPrev}\n      onSubmit={onSubmit}\n    />\n  )}\n  {steps[stepOrder] === 'COMPLETE' && idCardId && <CompleteStep idCardId={idCardId} />}\n</div>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"number\ud0c0\uc785\uc758 ",(0,r.kt)("inlineCode",{parentName:"li"},"stepOrder"),"\uc744 \uc120\uc5b8\ud55c\ub2e4. \uc774\ub294 step\uc758 index\uac12\uc774\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onSubmit"),"\uc740 \uc81c\ucd9c\ud558\ub294 \ubc84\ud2bc\uc744 \ub20c\ub800\uc744 \ub54c \uc2e4\ud589\ub418\ub294 \ud568\uc218\uc774\ubbc0\ub85c ",(0,r.kt)("inlineCode",{parentName:"li"},"onNext"),"\ub97c \uc2e4\ud589\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\ucef4\ud3ec\ub10c\ud2b8\uc758 \uc778\uc790\ub85c ",(0,r.kt)("inlineCode",{parentName:"li"},"onNext"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"onPrev"),"\uc744 \ub118\uaca8\uc900\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"step[stepOrder]"),"\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"stepOrder"),"\uc5d0 \ud574\ub2f9\ud558\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"step"),"\uc744 \uc758\ubbf8\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774 step\uc774 \uccab \ub2e8\uacc4, \uc989 ",(0,r.kt)("inlineCode",{parentName:"li"},"BOARDING"),"\uc77c \uacbd\uc6b0 ",(0,r.kt)("inlineCode",{parentName:"li"},"BoardingStep"),"\uc744 \ub80c\ub354\ub9c1\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc774 step\uc774 \ub9c8\uc9c0\ub9c9 \ub2e8\uacc4, \uc989 ",(0,r.kt)("inlineCode",{parentName:"li"},"COMPLETE"),"\uc77c \uacbd\uc6b0 ",(0,r.kt)("inlineCode",{parentName:"li"},"CompleteStep"),"\uc744 \ub80c\ub354\ub9c1\ud55c\ub2e4.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// IdCardCreateForm.tsx\n'use client';\nimport { FormEvent } from 'react';\nimport { useFormContext } from 'react-hook-form';\n\nimport { TopNavigation } from '~/components/TopNavigation';\nimport { CreationSteps } from '~/modules/IdCardCreation/IdCardCreation.type';\nimport { KeywordStep } from '~/modules/IdCardCreation/Step/KeywordStep.client';\nimport { IdCardCreationFormModel } from '~/types/idCard';\nimport { tw } from '~/utils/tailwind.util';\n\nimport { KeywordContentStep, ProfileStep } from '../Step';\n\ntype IdCardCreationFormProps = {\n  steps: CreationSteps[];\n  stepOrder: number;\n  onNext: () => void;\n  onPrev: () => void;\n  onSubmit: () => void;\n};\n\nconst disableButtonStyle = 'text-grey-400';\n\nexport const IdCardCreationForm = ({\n  steps,\n  stepOrder,\n  onNext,\n  onPrev,\n  onSubmit,\n}: IdCardCreationFormProps) => {\n  const {\n    formState: { errors, isDirty, isValid, isSubmitting },\n  } = useFormContext<IdCardCreationFormModel>();\n\n  const getNavigationButton = () => {\n    let error;\n    let disableStyle;\n    switch (steps[stepOrder]) {\n      case 'PROFILE':\n        error = !isDirty || !!errors?.nickname || !isValid;\n        disableStyle = (error && disableButtonStyle) || '';\n        return (\n          <button className={disableStyle} disabled={error} onClick={onNext}>\n            \ub2e4\uc74c\n          </button>\n        );\n      case 'KEYWORD':\n        disableStyle = (!isValid && disableButtonStyle) || '';\n        return (\n          <button className={disableStyle} disabled={!isValid} onClick={onNext}>\n            \ub2e4\uc74c\n          </button>\n        );\n      case 'KEYWORD_CONTENT':\n        disableStyle = (!isValid && disableButtonStyle) || '';\n        return (\n          <button\n            className={tw(disableStyle, 'submission')}\n            disabled={!isValid || isSubmitting}\n            onClick={onSubmit}\n          >\n            \uc81c\ucd9c\n          </button>\n        );\n      default:\n        return null;\n    }\n  };\n  const NavigationButton = getNavigationButton();\n\n  return (\n    <div>\n      <TopNavigation>\n        <TopNavigation.Left>\n          <TopNavigation.BackButton onClickBackButton={onPrev} />\n        </TopNavigation.Left>\n        <TopNavigation.Title />\n        <TopNavigation.Right className=\"text-h5 text-primary-500\">\n          {NavigationButton}\n        </TopNavigation.Right>\n        <TopNavigation.ProgressBar currentStep={stepOrder} stepsLength={3} />\n      </TopNavigation>\n\n      <form className=\"pt-24pxr\" onSubmit={(e: FormEvent<HTMLFormElement>) => e.preventDefault()}>\n        {steps[stepOrder] === 'PROFILE' && <ProfileStep />}\n        {steps[stepOrder] === 'KEYWORD' && <KeywordStep />}\n        {steps[stepOrder] === 'KEYWORD_CONTENT' && <KeywordContentStep />}\n      </form>\n    </div>\n  );\n};\n\n")),(0,r.kt)("h3",{id:"step-\ub2e8\uacc4"},"Step \ub2e8\uacc4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"<form className=\"pt-24pxr\" onSubmit={(e: FormEvent<HTMLFormElement>) => e.preventDefault()}>\n  {steps[stepOrder] === 'PROFILE' && <ProfileStep />}\n  {steps[stepOrder] === 'KEYWORD' && <KeywordStep />}\n  {steps[stepOrder] === 'KEYWORD_CONTENT' && <KeywordContentStep />}\n</form>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onSubmit"),"\ud568\uc218\ub294 \ub118\uaca8\ubc1b\uc740 ",(0,r.kt)("inlineCode",{parentName:"li"},"onSubmit"),"\ud568\uc218\ub97c \uc2e4\ud589\ud55c\ub2e4."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"steps[stepOrder]"),"\uc5d0 \ub530\ub77c \uac01\uac01 \ub2e4\ub978 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ubcf4\uc5ec\uc900\ub2e4.")))}u.isMDXComponent=!0}}]);