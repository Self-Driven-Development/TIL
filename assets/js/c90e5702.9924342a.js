"use strict";(self.webpackChunkdogsounds_til=self.webpackChunkdogsounds_til||[]).push([[1981],{68339:(e,n,r)=>{r.d(n,{Zo:()=>u,kt:()=>y});var t=r(39953);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=t.createContext({}),s=function(e){var n=t.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},u=function(e){var n=s(e.components);return t.createElement(p.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(r),m=a,y=c["".concat(p,".").concat(m)]||c[m]||d[m]||o;return r?t.createElement(y,i(i({ref:n},u),{},{components:r})):t.createElement(y,i({ref:n},u))}));function y(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},33369:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var t=r(855),a=(r(39953),r(68339));const o={description:"Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\uae30",keywords:["react-query","suspensive","next13","ErrorBoundary"]},i="23.08.03",l={unversionedId:"\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0",id:"\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0",title:"23.08.03",description:"Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\uae30",source:"@site/members/\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0.md",sourceDirName:"\uac15\uc8fc\ud601/23.08",slug:"/\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0",draft:!1,editUrl:"https://github.com/Self-Driven-Development/TIL/tree/main/members/\uac15\uc8fc\ud601/23.08/08.03 \uc77c\uc9c0.md",tags:[],version:"current",frontMatter:{description:"Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\uae30",keywords:["react-query","suspensive","next13","ErrorBoundary"]},sidebar:"all",previous:{title:"23.08.02",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.08/08.02 \uc77c\uc9c0"},next:{title:"23.08.04",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.08/08.04 \uc77c\uc9c0"}},p={},s=[{value:"\uc624\ub298 \ud55c \uc77c",id:"\uc624\ub298-\ud55c-\uc77c",level:2},{value:"\uce74\uacf5\uc2e4\ub85d \uc7a5\uc18c \uc0c1\uc138\ud398\uc774\uc9c0 \uc11c\ubc84 \ucef4\ud3ec\ub10c\ud2b8 \ubd84\ub9ac",id:"\uce74\uacf5\uc2e4\ub85d-\uc7a5\uc18c-\uc0c1\uc138\ud398\uc774\uc9c0-\uc11c\ubc84-\ucef4\ud3ec\ub10c\ud2b8-\ubd84\ub9ac",level:2},{value:"Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9",id:"suspensive-\ub77c\uc774\ube0c\ub7ec\ub9ac-\uc0ac\uc6a9",level:2},{value:"\uc801\uc6a9\ud574\ubcf4\uae30",id:"\uc801\uc6a9\ud574\ubcf4\uae30",level:3},{value:"\ub0b4\uc77c \ud560 \uc77c",id:"\ub0b4\uc77c-\ud560-\uc77c",level:2}],u={toc:s},c="wrapper";function d(e){let{components:n,...r}=e;return(0,a.kt)(c,(0,t.Z)({},u,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"230803"},"23.08.03"),(0,a.kt)("h2",{id:"\uc624\ub298-\ud55c-\uc77c"},"\uc624\ub298 \ud55c \uc77c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uce74\uacf5\uc2e4\ub85d \uc7a5\uc18c \uc0c1\uc138\ud398\uc774\uc9c0 \uc11c\ubc84 \ucef4\ud3ec\ub10c\ud2b8 \ubd84\ub9ac"),(0,a.kt)("li",{parentName:"ul"},"gloddy \ubaa8\uc784 \uc0c1\uc138\ud398\uc774\uc9c0 api \uc5f0\uacb0")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\uce74\uacf5\uc2e4\ub85d-\uc7a5\uc18c-\uc0c1\uc138\ud398\uc774\uc9c0-\uc11c\ubc84-\ucef4\ud3ec\ub10c\ud2b8-\ubd84\ub9ac"},"\uce74\uacf5\uc2e4\ub85d \uc7a5\uc18c \uc0c1\uc138\ud398\uc774\uc9c0 \uc11c\ubc84 \ucef4\ud3ec\ub10c\ud2b8 \ubd84\ub9ac"),(0,a.kt)("p",null,"\uc774\uc804\uc5d0\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"page.tsx")," \ud30c\uc77c\uc5d0 UI\uc640 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 \uc11e\uc5ec\uc788\uc5c8\ub2e4. \uadf8\ub798\uc11c \uc5ed\ud560\uc5d0 \ub530\ub77c \ucef4\ud3ec\ub10c\ud2b8\ub97c \ubd84\ub9ac\ud588\ub2e4."),(0,a.kt)("h2",{id:"suspensive-\ub77c\uc774\ube0c\ub7ec\ub9ac-\uc0ac\uc6a9"},"Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9"),(0,a.kt)("p",null,"gloddy\uc640 \uce74\uacf5\uc2e4\ub85d \ub450 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ub3c4\uc785\ud558\uc790\uace0 \uc81c\uc548\ud588\ub2e4. \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\uba74 \ucf54\ub4dc\ub97c \ub354\uc6b1 \uc120\uc5b8\uc801\uc73c\ub85c \uc791\uc131\ud560 \uc218 \uc788\uc5b4\uc11c \uc88b\ub2e4."),(0,a.kt)("p",null,"\ub2e4\ub4e4 \ub3c4\uc785\uc5d0 \ub300\ud574 \ud754\ucf8c\ud788 \ub3d9\uc758\ud574\uc11c \ubc14\ub85c \uc801\uc6a9\ud574\ubcf4\uc558\ub2e4."),(0,a.kt)("h3",{id:"\uc801\uc6a9\ud574\ubcf4\uae30"},"\uc801\uc6a9\ud574\ubcf4\uae30"),(0,a.kt)("p",null,"\ucee4\uc2a4\ud140 \ucffc\ub9ac \ud6c5\uc744 \ub9cc\ub4e4 \ub54c ",(0,a.kt)("inlineCode",{parentName:"p"},"useQuery")," \ub300\uc2e0 ",(0,a.kt)("inlineCode",{parentName:"p"},"useSuspenseQuery"),"\ub97c \uc0ac\uc6a9\ud55c\ub2e4."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// apis/place/queries.ts\nexport function useGetPlace(id: number) {\n  return useSuspenseQuery(Keys.place(id), () => getPlace(id));\n}\n")),(0,a.kt)("p",null,"\ub098\ub294 \uc11c\ubc84\ucef4\ud3ec\ub10c\ud2b8(\ud398\uc774\uc9c0)\uc5d0\uc11c \ub370\uc774\ud130\ub97c prefetch\ud558\uace0 \uc788\ub2e4. suspense\ub85c \uac10\uc2f8\uace0 \uadf8 \uc704\uc5d0 errorboundary\ub97c \uac10\uc2f8\uc11c \uc5d0\ub7ec\ub97c \uc7a1\uc73c\ub824\uace0 \ud588\ub2e4.",(0,a.kt)("br",{parentName:"p"}),"\n","react-query\uc5d0\uc11c ",(0,a.kt)("a",{parentName:"p",href:"https://tanstack.com/query/v4/docs/react/reference/QueryErrorResetBoundary"},(0,a.kt)("inlineCode",{parentName:"a"},"QueryErrorResetBoundary")),"\ub97c \uc81c\uacf5\ud558\ub294\ub370, \uc774 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud558\uba74 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \uce90\uc2dc\ub97c \ub9ac\uc14b\ud560 \uc218 \uc788\ub294 UI\ub97c \ub744\uc6b8 \uc218 \uc788\ub2e4."),(0,a.kt)("p",null,"\ud558\uc9c0\ub9cc \uc0ac\uc6a9\ud560 \ub584 \uaf64\ub098 \ubcf5\uc7a1\ud574 \ubcf4\uc77c \uc218 \uc788\ub2e4. ",(0,a.kt)("inlineCode",{parentName:"p"},"QueryErrorResetBoundary + ErrorBoundary"),"\uac00 \uae30\ubcf8\uc774\uace0, \ucd94\uac00\ub85c Suspense\uae4c\uc9c0 \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uc815\uc2e0 \uc5c6\ub2e4.."),(0,a.kt)("br",null),(0,a.kt)("p",null,"\uc774\ub7f0 \ubb38\uc81c\ub97c Suspensive \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c \ud574\uacb0\ud574\uc8fc\uace0 \uc788\ub2e4."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"QueryErrorBoundary"),"\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"QueryErrorResetBoundary + ErrorBoundary"),"\uc640 \ub3d9\uc77c\ud558\uace0,",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"QueryAsyncBoundary"),"\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"QueryErrorResetBoundary + ErrorBoundary + Suspense"),"\uc640 \ub3d9\uc77c\ud558\ub2e4."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"AsyncBoundary"),"\ub77c\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub3c4 \uc81c\uacf5\ud558\uace0 \uc788\ub294\ub370, ",(0,a.kt)("inlineCode",{parentName:"p"},"ErrorBoundary + Suspense"),"\uc640 \ub3d9\uc77c\ud558\uae30 \ub54c\ubb38\uc5d0",(0,a.kt)("br",{parentName:"p"}),"\n","\uacb0\uad6d ",(0,a.kt)("inlineCode",{parentName:"p"},"QueryAsyncBoundary"),"\ub294 ",(0,a.kt)("inlineCode",{parentName:"p"},"QueryErrorBoundary + AsyncBoundary"),"\uc774\ub2e4."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import PlaceDetail from './components/PlaceDetail';\nimport { Keys, getPlace } from '@/apis/place';\nimport { HydrationProvider } from '@/providers/HydrationProvider';\nimport { QueryAsyncBoundary } from '@suspensive/react-query';\n\nexport default async function PlacePage({ params }: { params: { id: string } }) {\n  const placeId = Number(params.id);\n  return (\n    <QueryAsyncBoundary\n      pendingFallback={<div>\ub85c\ub529\uc911</div>}\n      rejectedFallback={({ error, reset }) => (\n        <div>\n          <div>\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.</div>\n          <button onClick={reset}>\uc7ac\uc2dc\ub3c4</button>\n          <pre>{error.message}</pre>\n        </div>\n      )}\n    >\n      <HydrationProvider queryKey={Keys.place(placeId)} queryFn={() => getPlace(placeId)}>\n        <PlaceDetail placeId={placeId} />\n      </HydrationProvider>\n    </QueryAsyncBoundary>\n  );\n}\n")),(0,a.kt)("br",null),(0,a.kt)("p",null,"\uc774\uc81c \ub370\uc774\ud130\ub97c \uac00\uc838\uc62c \ub54c \ubcc4\ub2e4\ub978 \ubd84\uae30\ucc98\ub9ac \uc5c6\uc774 data\ub97c \uac00\uc838\uc624\uba74 \ub41c\ub2e4."),(0,a.kt)("img",{width:"619",alt:"image",src:"https://github.com/Self-Driven-Development/TIL/assets/23312485/59d2befc-809d-4e81-8eb4-74fab0628d87"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"// components/PlaceDetail.tsx\nexport default function PlaceDetail({ placeId }: PlaceDetailProps) {\n  const { data: placeData } = useGetPlace(placeId); // placeData: Place\n\n  return (\n    // ...\n  );\n}\n")),(0,a.kt)("admonition",{title:"\uc8fc\uc758\ud560 \uc810",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"\uc704\uc640 \uac19\uc774 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uba74 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uac8c \ub41c\ub2e4."),(0,a.kt)("blockquote",{parentName:"admonition"},(0,a.kt)("p",{parentName:"blockquote"},'Uncaught Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with "use server".')),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("img",{parentName:"p",src:"https://github.com/Self-Driven-Development/TIL/assets/23312485/af14c872-1e9a-4af0-8701-112abe5ec090",alt:"image"})),(0,a.kt)("p",{parentName:"admonition"},'\ud568\uc218\ub97c "use server"\ub85c \ud45c\uc2dc\ud574\uc11c \uba85\uc2dc\uc801\uc73c\ub85c \uc791\uc131\ud55c \uacbd\uc6b0 \ub9d0\uace0\ub294 \uc9c1\uc811 \ud074\ub77c\uc774\uc5b8\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc5c6\ub2e4\uace0 \ud55c\ub2e4.'),(0,a.kt)("h2",{parentName:"admonition",id:"\ud574\uacb0-\ubc29\ubc95"},"\ud574\uacb0 \ubc29\ubc95"),(0,a.kt)("h3",{parentName:"admonition",id:"1-rejectedfallback\uc5d0-\ub4e4\uc5b4\uac08-fallback-\ucef4\ud3ec\ub10c\ud2b8-\ub9cc\ub4e4\uae30"},"1. rejectedFallback\uc5d0 \ub4e4\uc5b4\uac08 fallback \ucef4\ud3ec\ub10c\ud2b8 \ub9cc\ub4e4\uae30"),(0,a.kt)("p",{parentName:"admonition"},"fallback \ud074\ub77c\uc774\uc5b8\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\uc11c ",(0,a.kt)("inlineCode",{parentName:"p"},"rejectedFallback"),"\uc5d0 \uc804\ub2ec\ud574\uc8fc\uba74 \ub41c\ub2e4."),(0,a.kt)("h3",{parentName:"admonition",id:"2-use-server-\ucd94\uac00"},'2. "use server" \ucd94\uac00'),(0,a.kt)("blockquote",{parentName:"admonition"},(0,a.kt)("p",{parentName:"blockquote"},'"use serve"\ub97c \ucd94\uac00\ud558\uae30 \uc704\ud574\uc11c\ub294 next config \ud30c\uc77c\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\ud574\uc57c\ud55c\ub2e4.'),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// next.config.js\nmodule.exports = {\n  experimental: {\n    serverActions: true,\n  },\n};\n"))),(0,a.kt)("br",null),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"<QueryAsyncBoundary\n  pendingFallback={<div>\ub85c\ub529\uc911</div>}\n  rejectedFallback={async ({ error, reset }) => {\n    'use server';\n    return (\n      <div>\n        <div>\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.</div>\n        <button onClick={reset}>\uc7ac\uc2dc\ub3c4</button>\n        <pre>{error.message}</pre>\n      </div>\n    );\n  }}\n>\n")),(0,a.kt)("h3",{parentName:"admonition",id:"3-queryasyncboundary\ub97c-\ucee4\uc2a4\ud140-\ucef4\ud3ec\ub10c\ud2b8\ub85c-\ub9cc\ub4e4\uae30"},"3. ",(0,a.kt)("inlineCode",{parentName:"h3"},"QueryAsyncBoundary"),"\ub97c \ucee4\uc2a4\ud140 \ucef4\ud3ec\ub10c\ud2b8\ub85c \ub9cc\ub4e4\uae30"),(0,a.kt)("p",{parentName:"admonition"},"\ucee4\uc2a4\ud140 \ud074\ub77c\uc774\uc5b8\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub85c \ub9cc\ub4e4\uc5b4\uc11c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\ub0b4\uc77c-\ud560-\uc77c"},"\ub0b4\uc77c \ud560 \uc77c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"gloddy \ubaa8\uc784 \uba64\ubc84 \uc0c1\uc138\uc815\ubcf4 \ud398\uc774\uc9c0 \ud37c\ube14\ub9ac\uc2f1")))}d.isMDXComponent=!0}}]);