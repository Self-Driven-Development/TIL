"use strict";(self.webpackChunkdogsounds_til=self.webpackChunkdogsounds_til||[]).push([[79190],{68339:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var r=t(39953);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=r.createContext({}),p=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(i.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(t),m=a,k=c["".concat(i,".").concat(m)]||c[m]||d[m]||l;return t?r.createElement(k,o(o({ref:n},u),{},{components:t})):r.createElement(k,o({ref:n},u))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=m;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[c]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},72354:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>p});var r=t(855),a=(t(39953),t(68339));const l={description:"\ud1a0\uc2a4\uc758 useFunnel \ud6c5\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uae30",keywords:["useFunnel","react-hook-form \uc5d0\ub7ec"]},o="23.07.21",s={unversionedId:"\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0",id:"\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0",title:"23.07.21",description:"\ud1a0\uc2a4\uc758 useFunnel \ud6c5\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uae30",source:"@site/members/\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0.md",sourceDirName:"\uac15\uc8fc\ud601/23.07",slug:"/\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0",draft:!1,editUrl:"https://github.com/Self-Driven-Development/TIL/tree/main/members/\uac15\uc8fc\ud601/23.07/07.21 \uc77c\uc9c0.md",tags:[],version:"current",frontMatter:{description:"\ud1a0\uc2a4\uc758 useFunnel \ud6c5\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uae30",keywords:["useFunnel","react-hook-form \uc5d0\ub7ec"]},sidebar:"all",previous:{title:"23.07.20",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.07/07.20 \uc77c\uc9c0"},next:{title:"23.07.22",permalink:"/TIL/members/\uac15\uc8fc\ud601/23.07/07.22 \uc77c\uc9c0"}},i={},p=[{value:"\uc624\ub298 \ud55c \uc77c",id:"\uc624\ub298-\ud55c-\uc77c",level:2},{value:"\ud558\ub8e8 \uc694\uc57d",id:"\ud558\ub8e8-\uc694\uc57d",level:2},{value:"Gloddy \uac1c\ubc1c - <code>useFunnel</code> \uc9c1\uc811 \uad6c\ud604",id:"gloddy-\uac1c\ubc1c---usefunnel-\uc9c1\uc811-\uad6c\ud604",level:2},{value:"\uc65c? \uadf8\ub0e5 \ud1a0\uc2a4\uaebc \uc4f0\uba74 \ub418\ub294\uac70 \uc544\ub0d0?",id:"\uc65c-\uadf8\ub0e5-\ud1a0\uc2a4\uaebc-\uc4f0\uba74-\ub418\ub294\uac70-\uc544\ub0d0",level:3},{value:"\uadf8\ub798\uc11c \uc9c1\uc811 \ub9cc\ub4e4\uc5b4\ubcf4\uc558\ub2e4.",id:"\uadf8\ub798\uc11c-\uc9c1\uc811-\ub9cc\ub4e4\uc5b4\ubcf4\uc558\ub2e4",level:3},{value:"\uc544\uc9c1 \uad6c\ud604\ub418\uc9c0 \uc54a\uc740 \ubd80\ubd84",id:"\uc544\uc9c1-\uad6c\ud604\ub418\uc9c0-\uc54a\uc740-\ubd80\ubd84",level:3},{value:"Gloddy \uac1c\ubc1c - react-hook-form \uc5d0\ub7ec",id:"gloddy-\uac1c\ubc1c---react-hook-form-\uc5d0\ub7ec",level:2},{value:"\ub0b4\uc77c \ud560 \uc77c",id:"\ub0b4\uc77c-\ud560-\uc77c",level:2}],u={toc:p},c="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"230721"},"23.07.21"),(0,a.kt)("h2",{id:"\uc624\ub298-\ud55c-\uc77c"},"\uc624\ub298 \ud55c \uc77c"),(0,a.kt)("ul",{className:"contains-task-list"},(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","Gloddy \uac1c\ubc1c"),(0,a.kt)("li",{parentName:"ul",className:"task-list-item"},(0,a.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","GDG \ud68c\uc758")),(0,a.kt)("h2",{id:"\ud558\ub8e8-\uc694\uc57d"},"\ud558\ub8e8 \uc694\uc57d"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"14:00 ~ 19:30 \uce74\uacf5"),(0,a.kt)("li",{parentName:"ul"},"20:00 ~ 01:00 \uc9d1\uacf5")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"gloddy-\uac1c\ubc1c---usefunnel-\uc9c1\uc811-\uad6c\ud604"},"Gloddy \uac1c\ubc1c - ",(0,a.kt)("inlineCode",{parentName:"h2"},"useFunnel")," \uc9c1\uc811 \uad6c\ud604"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"useFunnel"),"\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uc558\ub2e4. (\uc2dc\ub3c4\ud574\ubcf4\uc558\ub2e4)")),(0,a.kt)("h3",{id:"\uc65c-\uadf8\ub0e5-\ud1a0\uc2a4\uaebc-\uc4f0\uba74-\ub418\ub294\uac70-\uc544\ub0d0"},"\uc65c? \uadf8\ub0e5 \ud1a0\uc2a4\uaebc \uc4f0\uba74 \ub418\ub294\uac70 \uc544\ub0d0?"),(0,a.kt)("p",null,"\ud1a0\uc2a4\uc5d0\uc11c \ub9cc\ub4e0 ",(0,a.kt)("inlineCode",{parentName:"p"},"useFunnel"),"\uc740 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,a.kt)("inlineCode",{parentName:"p"},"next/router"),"\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4. \uadf8\ub798\uc11c Next 13 \ubc84\uc804\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4.. ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/toss/slash/issues/228"},"\uad00\ub828 \uc774\uc288")),(0,a.kt)("h3",{id:"\uadf8\ub798\uc11c-\uc9c1\uc811-\ub9cc\ub4e4\uc5b4\ubcf4\uc558\ub2e4"},"\uadf8\ub798\uc11c \uc9c1\uc811 \ub9cc\ub4e4\uc5b4\ubcf4\uc558\ub2e4."),(0,a.kt)("p",null,"\ud1a0\uc2a4\uc758 ",(0,a.kt)("inlineCode",{parentName:"p"},"Slash")," \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 ",(0,a.kt)("inlineCode",{parentName:"p"},"useFunnel")," \ud6c5\uc744 \ucc38\uace0\ud558\uc5ec \uc791\uc131\ud588\ub2e4."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"\uc18c\uc2a4 \ucf54\ub4dc"),(0,a.kt)("div",{markdown:"1"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"/* eslint-disable react/jsx-no-useless-fragment */\n'use client';\n\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Children, isValidElement, useEffect, useState } from 'react';\n\ntype NonEmptyArray<T> = [T, ...T[]];\n\ninterface FunnelProps {\n  children: React.ReactNode;\n}\n\ninterface StepProps<Steps extends NonEmptyArray<string>> {\n  name: Steps[number];\n  children: React.ReactNode;\n}\n\nexport function useFunnel<Steps extends NonEmptyArray<string>>(\n  steps: Steps,\n  options?: { initialStep?: Steps[number]; stepQueryKey?: string }\n) {\n  const initialStep = options?.initialStep ?? steps[0];\n  const queryKey = options?.stepQueryKey ?? 'step';\n  const [step, setStep] = useState<Steps[number]>(initialStep);\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const nextStep = () => {\n    const currentIndex = steps.indexOf(step);\n    if (currentIndex < steps.length - 1) {\n      setStep(steps[currentIndex + 1]);\n      window.history.pushState(\n        null,\n        '',\n        `${window.location.pathname}?${queryKey}=${steps[currentIndex + 1]}`\n      );\n    }\n  };\n\n  const prevStep = () => {\n    const currentIndex = steps.indexOf(step);\n    if (currentIndex > 0) {\n      setStep(steps[currentIndex - 1]);\n    }\n\n    router.back();\n  };\n\n  const Funnel = ({ children }: FunnelProps) => {\n    const childrenArray = Children.toArray(children)\n      .filter(isValidElement)\n      .filter(child => {\n        return (child.props as StepProps<Steps>).name !== undefined;\n      });\n\n    childrenArray.forEach(child => {\n      if (!steps.includes((child.props as StepProps<Steps>).name)) {\n        throw new Error('\uc2a4\ud15d \uc774\ub984\uc774 \uc798\ubabb\ub418\uc5c8\uc2b5\ub2c8\ub2e4.');\n      }\n    });\n\n    return <>{children}</>;\n  };\n\n  const Step = ({ name, children }: StepProps<Steps>) => {\n    return step === name ? <>{children}</> : null;\n  };\n\n  Funnel.Step = Step;\n\n  window.addEventListener('popstate', () => {\n    const currentStep = searchParams.get(queryKey) as Steps[number];\n    console.log('pop', currentStep);\n    if (currentStep) {\n      setStep(currentStep);\n    }\n  });\n\n  window.addEventListener('pushstate', () => {\n    const currentStep = searchParams.get(queryKey) as Steps[number];\n    console.log('push', currentStep);\n  });\n\n  useEffect(() => {\n    const currentStep = searchParams.get(queryKey) as Steps[number];\n    if (!currentStep) {\n      window.history.replaceState(\n        null,\n        '',\n        `${window.location.pathname}?${queryKey}=${initialStep}`\n      );\n    }\n  }, [initialStep, queryKey, searchParams]);\n\n  return { currentStep: step, Funnel, nextStep, prevStep } as const;\n}\n")))),(0,a.kt)("p",null,"\ucd5c\ub300\ud55c \ub0b4 \ubc29\uc2dd\ub300\ub85c \ud574\ubd24\ub2e4. ",(0,a.kt)("inlineCode",{parentName:"p"},"useFunnel")," \ud6c5\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function FeedbackWrapper() {\n  const { Funnel, prevStep, nextStep } = useFunnel(['praise', 'mate']);\n  const { handleSubmit } = useFeedbackContext();\n\n  const onSubmit = (data: FeedbackRequestType) => {\n    console.log(data);\n  };\n\n  return (\n    <Funnel>\n      <Funnel.Step name=\"praise\">\n        <PraiseComponent onPrevClick={prevStep} onNextClick={nextStep} />\n      </Funnel.Step>\n      <Funnel.Step name=\"mate\">\n        <MateComponent onPrevClick={prevStep} onNextClick={handleSubmit(onSubmit)} />\n      </Funnel.Step>\n    </Funnel>\n  );\n}\n")),(0,a.kt)("h3",{id:"\uc544\uc9c1-\uad6c\ud604\ub418\uc9c0-\uc54a\uc740-\ubd80\ubd84"},"\uc544\uc9c1 \uad6c\ud604\ub418\uc9c0 \uc54a\uc740 \ubd80\ubd84"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \ub4a4\ub85c\uac00\uae30\ub97c \ub20c\ub800\uc744 \ub54c, step\uc774 \ubc14\ub00c\uc9c0 \uc54a\ub294\ub2e4. ",(0,a.kt)("inlineCode",{parentName:"p"},"popState"),"\ub85c \ucc98\ub9ac\ud574\uc11c \ub4a4\ub85c \uac08 \ub54c\ub294 \ub418\ub294\uac70\uac19\uc740\ub370 \uc55e\uc73c\ub85c \uac08 \ub54c \ub610 \uc548\ub41c\ub2e4..")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\ucffc\ub9ac\uc2a4\ud2b8\ub9c1\uc73c\ub85c \ud604\uc7ac \uc2a4\ud15d\uc744 \ud45c\uc2dc\ud574\uc11c, \uc0c8\ub85c\uace0\uce68\uc744 \ud588\uc744 \ub54c\ub3c4 \ud604\uc7ac \uc2a4\ud15d\uc744 \uc720\uc9c0\ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc57c\ud55c\ub2e4.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\uadf8 \uc678 \ucd5c\uc801\ud654"))),(0,a.kt)("h2",{id:"gloddy-\uac1c\ubc1c---react-hook-form-\uc5d0\ub7ec"},"Gloddy \uac1c\ubc1c - react-hook-form \uc5d0\ub7ec"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"react-hook-form"),"\uc758 ",(0,a.kt)("inlineCode",{parentName:"p"},"FormProvider"),"\ub97c \ucee4\uc2a4\ud140\ud574\uc11c \uc0ac\uc6a9\ud558\uace0 \uc788\uc5c8\ub2e4."),(0,a.kt)("p",null,"\uadfc\ub370 \uc774\ub7f0 \uc5d0\ub7ec\uac00 \ub5b4\ub2e4."),(0,a.kt)("img",{width:"440",alt:"image",src:"https://github.com/Self-Driven-Development/TIL/assets/23312485/266e06e8-c3ea-43d7-8a65-b58dfef532a3"}),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"useFormContext"),"\ub85c formState\ub97c \uac00\uc838\uc624\ub2c8\uae4c \uc0dd\uae34 \ubb38\uc81c\uc600\ub2e4."),(0,a.kt)("p",null,"\uc6d0\uc778\uc740 \uc815\ud655\ud788 \uc54c \uc218 \uc5c6\uc5b4\uc11c \uc77c\ub2e8 \uc784\uc2dc\ubc29\ud3b8\uc73c\ub85c ",(0,a.kt)("inlineCode",{parentName:"p"},"useFormState"),"\ub85c ",(0,a.kt)("inlineCode",{parentName:"p"},"control"),"\uc744 \ubc1b\uc544\uc640 \ud574\uacb0\ud588\ub2e4."),(0,a.kt)("p",null,"\uc624\ub298\uc740 \ub2a6\uc5c8\uc73c\ub2c8 \ub2e4\uc74c\uc5d0 \ub2e4\uc2dc \uc815\ud655\ud55c \uc6d0\uc778\uc744 \ucc3e\uc544\ubcf4\uc790..!"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\ub0b4\uc77c-\ud560-\uc77c"},"\ub0b4\uc77c \ud560 \uc77c"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Gloddy \uac1c\ubc1c")))}d.isMDXComponent=!0}}]);