## ğŸ¯ Flutter WebView í†µì‹  ì´í•´í•˜ê¸°
___
### Web Front â†’ Moblie
: JavaScriptChannel ì´ìš©  

ê³µì‹ë¬¸ì„œì— ì •ë³´ê°€ ì—†ì–´ì„œ IDEì—ì„œ ì½”ë“œë¥¼ ëœ¯ì–´ë³´ê¸°ë¡œ í–ˆë‹¤.  
ëœ¯ì–´ë³´ëŠ”ë° ëª¨ë¥´ëŠ”ê²Œ ëë„ ì—†ë‹¤ë³´ë‹ˆ DFSì²˜ëŸ¼ ë˜ì–´ë²„ë ¤ì„œ  
êµ¬í˜„ì½”ë“œ ì¤‘ ëª¨ë¥´ëŠ” ë¶€ë¶„ì„ 1~2ê³„ì¸µë§Œ ë“¤ì–´ê°€ì„œ í™•ì¸í•´ë³´ì•˜ë‹¤.  

#### êµ¬í˜„ì½”ë“œ
```Dart
WebViewController()
	..addJavaScriptChannel(
		"Toaster", 
    	onMessageReceived: (JavaScriptMessage message) {}
	)
```
`JavaScriptChannel`ì˜ ì´ë¦„ì„ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.  
message ë„ì°©ì‹œ í•¸ë“¤ëŸ¬ë¥¼ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.

#### WebViewController í´ë˜ìŠ¤
```Dart
WebViewController({
	void Function(WebViewPermissionRequest request)? onPermissionRequest,
    }) : this.fromPlatformCreationParams(
          const PlatformWebViewControllerCreationParams(),
          onPermissionRequest: onPermissionRequest,
        );
 ```
`WebViewPermissionRequest`: ì›¹ë·° ì‚¬ìš©ì— í—ˆê°€ìš”ì²­  
`onPermissionRequest`: í—ˆê°€ìš”ì²­ì„ í•¸ë“¤ë§í•  í•¨ìˆ˜  
`this.fromPlatformCreationParams()`: WebViewController ìƒì„±ì‹œ ìƒì„±ìë¡œì§, í”Œë«í¼ì— ë§ëŠ” ì„¤ì •ì„ ìœ„í•´ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ì¸ ê²ƒ ê°™ë‹¤  
`PlatformWebCiewControllerCreationParams()`: Flutterê°€ í”Œë«í¼(iOS, Android ë“±)ì— ë§ëŠ” ControllerCreationì„ ìœ„í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë‹´ëŠ” ë¶€ë¶„  
`onPermissionRequest`: í—ˆê°€ìš”ì²­ì„ í•¸ë“¤ë§í•  í•¨ìˆ˜ëŠ” í”Œë«í¼ ë…ë¦½ì ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ë„˜ê²¨ì¤€ë‹¤.  
ğŸ˜ â‡’ í•µì‹¬ì ì¸ ë¡œì§ì„ ì´í•´í•  ìˆœ ì—†ì—ˆì§€ë§Œ í”Œë«í¼ì— ë§ê²Œ ì„¤ì •ì„ ë‹¬ë¦¬í•˜ëŠ” ê²Œ ê°€ì¥ ìœ—ê³„ì¸µì— ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.  

#### addJavaScriptChannel() ë©”ì†Œë“œ
```Dart
  Future<void> addJavaScriptChannel(
    String name, {
    required void Function(JavaScriptMessage) onMessageReceived,
  }) {
    assert(name.isNotEmpty);
    return platform.addJavaScriptChannel(JavaScriptChannelParams(
      name: name,
      onMessageReceived: onMessageReceived,
    ));
  }
```

- `JavaScriptChannel`ì— ì‚¬ìš©ë  nameê³¼ `JavaScriptMessage`ë¥¼ ì¸ìë¡œ Messageê°€ ë„ì°©í–ˆì„ ë•Œ í•¸ë“¤ë§í•  ë¡œì§ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤  
- nameì´ ë¹ˆ ìŠ¤íŠ¸ë§ì´ë©´ Exceptionì„ ë°œìƒí•˜ê²Œ `assert()`ë¡œ ì •ì˜í•´ì¤€ë‹¤(ë³´ì•„í•˜ë‹ˆ nameì´ `JavaScriptChannel`ì˜ idë¡œ ë™ì‘í•˜ê²Œ ëœë‹¤)  
- `platform.addJavaScriptChannel()`ì„ í†µí•´ì„œ í”Œë«í¼ì— ë§ëŠ” `JavaScriptChannel`ì„ ë“±ë¡í•œë‹¤.  
ğŸ˜ â‡’ í•µì‹¬ì ì¸ ë¡œì§ì„ ì´í•´í•  ìˆœ ì—†ì—ˆì§€ë§Œ í”Œë«í¼ì— ë§ê²Œ ì„¤ì •ì„ ë‹¬ë¦¬í•˜ëŠ” ê²Œ ê°€ì¥ ìœ—ê³„ì¸µì— ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. 

#### JavaScriptMessage í´ë˜ìŠ¤
```Dart
@immutable
class JavaScriptMessage{
  const JavaScriptMessage({
    required this.message,
  });

  final String message;
}
```
`@immutable`: ë³€ê²½ë  ìˆ˜ ì—†ëŠ” ê°’ì„ì„ ëª…ì‹œ  
`message`: JavaScript ìª½ì—ì„œ ì „í•´ì ¸ì˜¤ëŠ” ë©”ì‹œì§€  

ğŸ˜ â‡’ JavaScriptMessageì˜ íŠ¹ì„±ë§Œ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.  
  <br>

**â‡’ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì²˜ìŒ ê¹Œë³´ëŠ”ë° ë‚´ë¶€ ë¡œì§ì´ ì–´ë”” ì¨ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš”ë ¹ì´ í•„ìš”í•œ ê²ƒ ê°™ë‹¤..**
  
___

### Mobile â†’ Web Front
: `controller.runJavaScript()` ì‚¬ìš©  

#### êµ¬í˜„ì½”ë“œ
``` Dart
static void sendDeviceToken(String token){
	controller.runJavaScript('window.reactGetToken($token)');
}
```
`runJavaScript('JS_CODE')`ë¡œ Front ìª½ì—ì„œ `JS_CODE`ë¡œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.  
___
### ë‚´ê°€ ì•Œê³ ì‹¶ì€ 'ë¡œì§'ì„ í™•ì¸í•˜ë ¤ë©´?

ğŸ˜€ â‡’ ê³µì‹ë¬¸ì„œëŠ” ì—†ìœ¼ë‹ˆ ê¹ƒí—ˆë¸Œ ë ˆí¬ë¥¼ forkí•´ì„œ ì½”ë“œë¥¼ ëœ¯ì–´ë³´ì
