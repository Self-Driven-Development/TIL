# 23.07.25(수)

## 1. [react-hook-form : useController](https://github.dev/KimJeongHyun/react-hook-form-test/tree/main/src/pages/SignUp/utils)

```js

export default function InputForm() {
  const methods = useForm<UserInfoTypes>({
    defaultValues:{
      userName:"",
      userPhone:"",
      gender:"M"
    }
  })

  const {userName, userPhone, gender} = useGetUserForms({control:methods.control})

  return (
    <UserInputContainer>
        <InputBlock>
          이름: <input value={userName.value} 
                  onChange={(e)=>handleOnChange({value:e.target.value,onChange:userName.onChange})}
                  placeholder="이름을 입력해주세요."  
                />
        </InputBlock>
        <InputBlock>
          전화번호: <input value={userPhone.value} 
                  onChange={(e)=>handleOnChange({value:e.target.value,onChange:userPhone.onChange})}
                  placeholder="핸드폰 번호를 입력해주세요."  
                />
        </InputBlock>
        <GenderBlock>
          <label>남성</label>
          <input type="radio" value={"M"} 
                  onChange={(e)=>handleOnChange({value:e.target.value,onChange:gender.onChange})} 
                  checked={gender.value==="M"}/>
        </GenderBlock>
        <GenderBlock>
          <label>여성</label>
          <input type="radio" value={"F"} 
                  onChange={(e)=>handleOnChange({value:e.target.value,onChange:gender.onChange})} 
                  checked={gender.value==="F"}/>
        </GenderBlock>
        <ConfirmButtonArea>
          <ConfirmButton 
              onClick={()=>onSubmit({userName:userName.value,userPhone:userPhone.value,gender:gender.value})}
          >
            등록
          </ConfirmButton>
        </ConfirmButtonArea>
    </UserInputContainer>
  );
}


```
- `useForm`으로부터 `methods`를 불러와, 이 `methods`의 `control`을 커스텀하여 만든 `useGetUserForms`을 통해 `useController`를 가져오고 있다.

- `useGetUsersForms`는 다음과 같다.
```js
export default function useGetUserForms({control}:{control:Control<UserInfoTypes>}){
    const {field:userName} = useController({
        name:"userName",
        control
    })

    const {field:userPhone} = useController({
        name:"userPhone",
        control
    })

    const {field:gender} = useController({
        name:"gender",
        control
    })

    return { userName, userPhone, gender };
}
```
- `useController`는 `react-hook-form`에서 제공하는 커스텀 훅이다. `useForm`으로부터 받은 `control`을 통해 `name`을 지정해주고, `field`를 받아온다.
- 이렇게 `useController`로부터 받은 `filed`의 `value`를 각 `input`의 value에 뿌려준다. 또한, `field`의 `onChange`는 `input`의 `onChange`에 뿌려준다.

- 이런 방식으로 input을 관리하는 로직과 input을 뿌려주는 로직을 분리할 수 있다.
