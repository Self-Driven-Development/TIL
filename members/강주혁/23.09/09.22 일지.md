# 23.09.22

## 오늘 한 일

- gloddy 개발
  - 라우팅 이슈

---

# gloddy - 라우팅 이슈

## 문제

로그인 후 매칭 페이지로 이동하면 하얀 페이지가 나오거나 404 페이지가 나온다.

그리고 언어 변경 시에도 무언가 이상하게 작동한다.

## 원인

여러 문제가 있었다.

1. 토큰 재발급 try catch 후 lng를 붙여 리다이렉트하는 로직까지 이어지지 않음
2. `PRIVATE_PAGE` 정규표현식이 잘못되어 있음
3. `setTokenAtCookie`이 비동기 함수인데 동기 함수처럼 사용함

등..

## 해결

거의 다 해결했는데 언어 변경 쪽에서 조금조금씩 문제가 생긴다.

분명 url은 `en`인데 page.tsx에서 찍을 때는 `ko`로 찍힌다는 둥, 언어 변경할 때 `router.refresh` 안하면 제대로 적용이 안된다는 둥..

일단 PR은 올렸고, 내일 다시 해결해보자.

## 내일 할 일

- 오늘 못다한 것들 해결
- 블로그 개발