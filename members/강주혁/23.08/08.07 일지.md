# 23.08.07

## ì˜¤ëŠ˜ í•œ ì¼
- TS ìŠ¤í„°ë””
- zustand [ì§ˆë¬¸](https://github.com/pmndrs/zustand/discussions/1980) ë‹µë³€
- ì¹´ê³µì‹¤ë¡ ë¦¬ë·° ì‘ì„± api ì—°ê²°

---

## ğŸ¤”ì—°ì†ì ì¸ mutation ì²˜ë¦¬?

ì„œë²„ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ -> ì´ë¯¸ì§€ id ë°°ì—´ ë°›ìŒ -> ë¦¬ë·° ìš”ì²­ ì‹œ ì´ë¯¸ì§€ id ë°°ì—´ì„ ê°™ì´ ë³´ë‚´ì•¼ í•¨

### ì²« ì‹œë„

mutate -> onSucess -> mutate

```tsx
const { mutate: postReviewMutate } = usePostReviewMutation(placeId);
const { mutate: uploadImagesMutate } = useImagesUpload();

const handlePostReviewClick = () => {
  uploadImagesMutate({ 
    files: images,
    folderName: 'review'
  }, 
  {
    onSuccess: (data) => {
      const imageIds = data.map((image) => image.id);
      postReviewMutate({ ...review, imageIds });
    },
  });
};
```

ë­”ê°€ ë³µì¡í•´ ë³´ì¸ë‹¤.. ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ë‹¤.

## ë‘ ë²ˆì§¸ ì‹œë„

mutateAsync -> mutate

```tsx
const { mutateAsync: postReviewMutateAsync } = usePostReviewMutation(placeId);
const { mutate: uploadImagesMutate } = useImagesUpload();

const handlePostReviewClick = async () => {
  const imageIds = await uploadImagesMutateAsync({
      files: images,
      folderName: 'review',
    }).then(({ images }) => images.map((image) => image.id));
  
  postReviewMutateAsync({ ...review, imageIds });
};
```

ë¶„ë¦¬ë˜ì–´ ìˆì–´ ê°€ë…ì„±ì€ ì¢‹ì•„ì¡Œë‹¤. í•˜ì§€ë§Œ ì´ê²Œ ë‚˜ì€ ë°©ë²•ì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤.

## TS ìŠ¤í„°ë”” ì¢…ë£Œ

ì±…ì„ ê°€ì§€ê³  ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ë§Œë‚˜ ê°™ì´ ì½ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í–ˆëŠ”ë°, ê¸ˆë°© ëë‚¬ë‹¤. ì±… ìì²´ê°€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì…ë¬¸ì„œì´ë‹¤ë³´ë‹ˆ ì‹¬í™”ì ì¸ ë¶€ë¶„ì€ ë§ì´ ìƒëµë˜ì–´ìˆì—ˆë‹¤.

### ìƒˆë¡œ ì•Œê²Œëœ ê²ƒ - Mapping Modifiers

```tsx
type Concrete<Type> = {
  [Property in keyof Type]-?: Type[Property];
};

type MaybeUser = {
  id: string;
  name?: string;
  age?: number;
};

type User = Concrete<MaybeUser>;
// type User = {
//   id: string;
//   name: string;
//   age: number;
// }
```
  
`-?`ë¥¼ ì‚¬ìš©í•˜ë©´ `?`ê°€ ë¶™ì€ ì†ì„±ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤. `+?`ëŠ” `?`ì™€ ê°™ë‹¤. `?` ë¿ë§Œ ì•„ë‹ˆë¼ `readonly`ë„ ì œê±°í•  ìˆ˜ ìˆë‹¤.

```tsx
type CreateMutable<Type> = {
  -readonly [Property in keyof Type]: Type[Property];
};
 
type LockedAccount = {
  readonly id: string;
  readonly name: string;
};
 
type UnlockedAccount = CreateMutable<LockedAccount>;
// type UnlockedAccount = {
//   id: string;
//   name: string;
// }
```




## ë‚´ì¼ í•  ì¼

- ì¹´ê³µì‹¤ë¡ ê°œë°œ