---
description: zustandë¥¼ Contextë¡œ ì‚¬ìš©í•´ì„œ ë²”ìœ„ ì œí•œí•˜ê¸°
keywords: [zustand, context, ë²”ìœ„ì œí•œ]
---

# 23.08.01

## ì˜¤ëŠ˜ í•œ ì¼

- gloddy ê°œë°œ

### ê°ê¸°ì— ê±¸ë ¸ë‹¤..ğŸ¥²

ì‚¬ì‹¤ 2ì£¼ ì „ë¶€í„° ì§€ê¸ˆê¹Œì§€ ê³„ì† ì½”ê°ê¸°ê°€ ìˆì—ˆëŠ”ë° ì˜¤ëŠ˜ì€ ì •ë§ í˜ë“¤ì—ˆë‹¤.

ì¹´í˜ì—ì„œ ê³„ì† ê¸°ì¹¨í•˜ê³  ì½§ë¬¼ì´ ë‚˜ì™€ì„œ ì§‘ì¤‘ì´ ì•ˆëë‹¤. ê·¸ë˜ì„œ ê³µë¶€ë¥¼ ë§ì´ í•˜ì§„ ëª»í•˜ê³  ì¼ì° ì˜ ì˜ˆì •ì´ë‹¤.

---

## zustandë¥¼ Contextë¡œ ì‚¬ìš©í•´ì„œ ë²”ìœ„ ì œí•œí•˜ê¸°

ì „ ë²„ì „ì—ì„œëŠ” `zustand/context`ì˜ `createContext`ë¥¼ ì œê³µí–ˆì§€ë§Œ, 4 ë²„ì „ìœ¼ë¡œ ë„˜ì–´ì˜¤ë©´ì„œ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë„ë¡ ê¶Œì¥í•˜ê³  ìˆë‹¤. (5ì—ì„œëŠ” ì œê±°ë  ì˜ˆì •)

```diff
// store.tsx
+ import { createContext, useContext } from "react";
- import create from "zustand";
- import createContext from "zustand/context";
+ import { createStore, useStore } from "zustand";

- const useStore = create((set) => ({
+ const store =  createStore((set) => ({
    bears: 0,
    increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),
    removeAllBears: () => set({ bears: 0 })
  }));

+ const MyContext = createContext()

+ export const Provider = ({ children }) => <MyContext.Provider value={store}>{children}</MyContext.Provider>;

+ export const useMyStore = (selector) => useStore(useContext(MyContext), selector);
```

ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë©´ `Provider`ë¡œ ê°ì‹¸ì§„ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ `useMyStore`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### createStore? create?

zustandì˜ ë‚´ë¶€ ì½”ë“œë¥¼ ë³´ë©´ ì´ë ‡ê²Œ ë˜ì–´ìˆë‹¤.

```ts
const createImpl = <T>(createState: StateCreator<T, [], []>) => {
  if (import.meta.env?.MODE !== 'production' && typeof createState !== 'function') {
    console.warn(
      "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
    );
  }
  const api = typeof createState === 'function' ? createStore(createState) : createState;

  const useBoundStore: any = (selector?: any, equalityFn?: any) =>
    useStore(api, selector, equalityFn);

  Object.assign(useBoundStore, api);

  return useBoundStore;
};

export const create = (<T>(createState: StateCreator<T, [], []> | undefined) =>
  createState ? createImpl(createState) : createImpl) as Create;
```

ë°˜í™˜ íƒ€ì…ì„ ë³´ë©´ ì´ë ‡ë‹¤.

- `createStore<T>`: `StoreApi<T>`
- `create<T>`: `UseBoundStore<StoreApi<T>>`

ê²°êµ­ `create`ëŠ” `createStore`ë¥¼ ì‚¬ìš©í•´ì„œ ë§Œë“  apië¥¼ `useStore`ì— ë„˜ê²¨ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° (createStore ver. / create ver.)

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

```tsx
// createStore ver.
import { createContext, useContext } from 'react';
import { createStore, useStore } from 'zustand';

type State = {
  bears: number;
  increasePopulation: () => void;
  removeAllBears: () => void;
};

const store = createStore<State>(set => ({
  bears: 0,
  increasePopulation: () => set(state => ({ bears: state.bears + 1 })),
  removeAllBears: () => set({ bears: 0 }),
}));

const MyContext = createContext<typeof store | null>(null);

export const Provider = ({ children }: { children: React.ReactNode }) => (
  <MyContext.Provider value={store}>{children}</MyContext.Provider>
);

export const useMyStore = (selector: (state: State) => unknown) => {
  const store = useContext(MyContext);
  if (!store) throw new Error('useMyStore must be used within a Provider');

  return useStore(store, selector);
};

// create ver.
import { createContext, useContext } from 'react';
import { create, useStore } from 'zustand';

type State = {
  bears: number;
  increasePopulation: () => void;
  removeAllBears: () => void;
};

const store = create<State>(set => ({
  bears: 0,
  increasePopulation: () => set(state => ({ bears: state.bears + 1 })),
  removeAllBears: () => set({ bears: 0 }),
}));

const MyContext = createContext<typeof store | null>(null);

export const Provider = ({ children }: { children: React.ReactNode }) => (
  <MyContext.Provider value={store}>{children}</MyContext.Provider>
);

export const useMyStore = (selector: (state: State) => unknown) => {
  const store = useContext(MyContext);
  if (!store) throw new Error('useMyStore must be used within a Provider');

  return store(selector);
};
```

### ê²°ë¡ 

ì €ë²ˆì— [ê³ ë¯¼](./../23.07/07.20%20ì¼ì§€.md#ë§Œì•½-ì „ì—­-ìƒíƒœ-ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼-ì‚¬ìš©í–ˆë‹¤ë©´)í–ˆë˜ ë‚´ìš©ì„ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

---

## ë‚´ì¼ í•  ì¼

- gloddy íšŒì˜ ë° ê°œë°œ
