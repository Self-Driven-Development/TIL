# 23.07.20

## ì˜¤ëŠ˜ í•œ ì¼

- Gloddy ê°œë°œ - ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ êµ¬í˜„
- CS ìŠ¤í„°ë”” ì§„í–‰

## í•˜ë£¨ ìš”ì•½

- 13:30 ~ 18:00 / 19:00 ~ 21:00 ì¹´ê³µ

---

## Gloddy ê°œë°œ - ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€ êµ¬í˜„

ì €ë²ˆ [ì „ì—­ ìƒíƒœì— ëŒ€í•œ ê³ ë¯¼](07.18%20ì¼ì§€.md#ìƒê°)ì„ í•´ë³´ê³ , ì „ì—­ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  íŠ¹ì • ë²”ìœ„ì— êµ­í•œëœ ìƒíƒœëŠ” ê·¸ ë²”ìœ„ ë‚´ì—ì„œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `Provider`ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬í•´ë³´ê¸°ë¡œ í–ˆë‹¤.

ì¼ë‹¨ ìµœì¢… êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

<img src="https://user-images.githubusercontent.com/23312485/254798997-18a685c3-8ae6-4160-8315-3996abf2a86f.png" width="400" />

`TopNavigationBar`ì—ì„œ ì´ë¯¸ì§€ ì¶”ê°€ ë²„íŠ¼ì´ ì¡´ì¬í•œë‹¤.

<br />

`Page` ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ëœë‹¤.

```tsx
<main>
  <WriteTopNavigationBar />
  <InputForm />
</main>
```

- `InputForm` ì»´í¬ë„ŒíŠ¸ì— TNBë¥¼ ë„£ëŠ”ë‹¤ âŒ
  - InputFormì€ form ë§Œ ë“¤ê³  ìˆì–´ì•¼ í•¨
- page ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , InputFormì— propsë¡œ ë„˜ê²¨ì¤€ë‹¤ âŒ
  - page ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì´ê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤. (í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ëŠ” RSCë¡œ í•˜ìê³  ì»¨ë²¤ì…˜ ë§ì¶¤)
- Context APIë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ê³µìœ í•œë‹¤ ğŸ¤”
- ì „ì—­ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ê³µìœ í•œë‹¤ ğŸ¤”

`ì „ì—­ ìƒíƒœ`ë¼ê³  ë³´ê¸°ì—” ì• ë§¤í•˜ë‹¤. `ê²Œì‹œê¸€ ì‘ì„± í˜ì´ì§€`ì—ì„œë§Œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— `íŠ¹ì • ë²”ìœ„ì— êµ­í•œëœ ìƒíƒœ`ë¼ê³  ë³´ëŠ”ê²Œ ë§ë‹¤.

ê·¸ë˜ì„œ `Context API`ë¥¼ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ê³µìœ í•˜ê¸°ë¡œ í–ˆë‹¤.

<br />

### Context API ì‚¬ìš©

```tsx
export default function WritePage() {
  return (
    <main>
      <WriteContextProvider>
        <WriteTopNavigationBar />
        <InputForm />
      </WriteContextProvider>
    </main>
  );
}
```

`WriteContextProvider` ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

```tsx
// WriteContext.tsx

'use client';
import { createContext, useContext, useMemo, useState } from 'react';

import type { ImageType, StrictPropsWithChildren } from '@/types';

type WriteContextType = {
  images: ImageType[];
  setImages: React.Dispatch<React.SetStateAction<ImageType[]>>;
};

const WriteContext = createContext<WriteContextType | null>(null);

function WriteContextProvider({ children }: StrictPropsWithChildren) {
  const [images, setImages] = useState<ImageType[]>([]);

  const contextValue = useMemo(() => ({ images, setImages }), [images]);

  return <WriteContext.Provider value={contextValue}>{children}</WriteContext.Provider>;
}

function useWriteContext() {
  const context = useContext(WriteContext);
  if (context === null) {
    throw new Error('useWriteContext must be used within a WriteContextProvider');
  }

  return context;
}

export { useWriteContext, WriteContextProvider };
```

ë­”ê°€ ë³µì¡í•´ ë³´ì´ì§€ë§Œ ì‚¬ì‹¤ ë³„ê±° ì—†ë‹¤.

1. ë¨¼ì € `WriteContext`ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
2. `WriteContextProvider` ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
   - `WriteContext`ì˜ `value`ë¡œ `images`ì™€ `setImages`ë¥¼ ë„˜ê²¨ì¤€ë‹¤.
   - ì´ ë•Œ, `contextValue`ëŠ” useMemoë¥¼ ì‚¬ìš©í•´ì„œ ìµœì í™”ë¥¼ í•´ì¤€ë‹¤.
3. `useWriteContext`ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
   - `WriteContext`ë¥¼ ì‚¬ìš©í•  ë•Œ, `useContext`ë¥¼ ì‚¬ìš©í•´ì„œ `context`ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
   - ë§Œì•½ `context`ê°€ `null`ì´ë¼ë©´, `useWriteContext`ë¥¼ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ê°€ `WriteContextProvider` ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.
   - ê·¸ë˜ì„œ ì—ëŸ¬ë¥¼ ë˜ì ¸ì¤€ë‹¤.
   - `context`ê°€ `null`ì´ ì•„ë‹ˆë¼ë©´, `context`ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤.

<br />

ë§Œì•½ ìœ„ì—ì„œ 3ë²ˆ ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤ë©´(íƒ€ì…ì„ ì¢í˜€ì£¼ì§€ ì•ŠëŠ”ë‹¤ë©´), contextë¥¼ ì‚¬ìš©í•  ë•Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `null`ì¼ ìˆ˜ë„ ìˆë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì— `null` ì²´í¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.

#### context ì‚¬ìš©

```tsx
const { images, setImages } = useWriteContext();
```

ì´ë ‡ê²Œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê³³ì—ì„œ `useWriteContext`ë¥¼ ì‚¬ìš©í•´ì„œ `images`ì™€ `setImages`ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

í•˜ì§€ë§Œ, Providerë¡œ ê°ì‹¸ì§„ ê³³ì— ì„ ì–¸ëœ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ì§€ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆë‹¤.

#### ë§Œì•½ ì „ì—­ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´?

ì „ì—­ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í–ˆë”ë¼ë„ ë™ì¼í•˜ê²Œ ë¡œì§ì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆì„ ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ, ë‹¤ë¥¸ ê³³ì—ì„œë„ í•´ë‹¹ ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì „ì—­ìœ¼ë¡œ ìƒíƒœë¥¼ ë¹¼ëŠ” ê±´ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê²°ì •í•´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.

ìœ„ ì²˜ëŸ¼ ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ë¥¼ ì •í•´ì„œ ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ì¢‹ì€ ê²ƒ ê°™ë‹¤.

#### Jotaië„ ë¹„ìŠ·í•œ ìƒê°ì„ í–ˆë‹¤

`Jotai`ì˜ [ì»¨ì…‰ ë¬¸ì„œ](https://jotai.org/docs/basics/concepts)ë¥¼ ì½ì–´ë³´ë©´ Contextì˜ ë¦¬ë Œë”ë§ ë¬¸ì œì—ì„œ ì¶œë°œí•œ ê²ƒ ê°™ë‹¤.

ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë‚˜ì˜¤ê¸° ì „ [use-context-selector](https://github.com/dai-shi/use-context-selector)ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ê³  í–ˆì—ˆë‹¤.

ê·¸ë¦¬ê³  Jotaiì˜ ì „ì‹ ì¸ [use-atom](https://github.com/dai-shi/use-atom)ë„ ìˆì—ˆë‹¤.

Jotaiì—ì„œ [`Provider`](https://jotai.org/docs/core/provider)ë¼ëŠ” ê²ƒë„ ì œê³µí•´ì¤€ë‹¤.

:::note Provider

The Provider component is to provide state for a component sub tree. Multiple Providers can be used for multiple subtrees, and they can even be nested. This works just like React Context.

If an atom is used in a tree without a Provider, it will use the default state. This is so-called provider-less mode.

Providers are useful for three reasons:

1. To provide a different state for each sub tree.
2. To accept initial values of atoms.
3. To clear all atoms by remounting.

:::

ì„ íƒì ìœ¼ë¡œ `store`ë¥¼ ì‚¬ìš©í•´ì„œ íŠ¹ì • ë²”ìœ„ ë‚´ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

ìƒí™©ì— ë”°ë¼ ì „ì—­ ìƒíƒœë¡œë„, íŠ¹ì • ë²”ìœ„ ë‚´ì—ì„œë§Œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ë„ ìˆë‹¤.

<br />

... ë‹¤ìŒì— ê¸°íšŒê°€ ë˜ë©´ í•œ ë²ˆ ì¨ë´ì•¼ê² ë‹¤.

---

## ë‚´ì¼ í•  ì¼

- Gloddy ìƒí˜¸í‰ê°€ í˜ì´ì§€ êµ¬í˜„
- Rust ê³µë¶€
- GDG íšŒì˜ 8ì‹œ
